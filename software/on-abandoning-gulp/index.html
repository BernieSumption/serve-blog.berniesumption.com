<!DOCTYPE html>
<html lang="en-GB" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#" class="no-js">

<!-- Mirrored from blog.berniesumption.com/software/on-abandoning-gulp/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:33:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="/wp-content/themes/twentyfifteen/js/html5.js"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>On abandoning Gulp &#8211; Bernie Sumption&#039;s Blog</title>
<link rel='dns-prefetch' href='http://vjs.zencdn.net/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Feed" href="../../feed/" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Comments Feed" href="../../comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; On abandoning Gulp Comments Feed" href="feed/" />
<link rel='stylesheet' id='collapseomatic-css-css'  href='../../wp-content/plugins/jquery-collapse-o-matic/light_stylef24c.css?ver=1.6' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-plugin-css'  href='../../wp-content/plugins/videojs-html5-video-player-for-wordpress/plugin-styles433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-css'  href='http://vjs.zencdn.net/4.5/video-js.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='../../wp-content/plugins/wp-syntax/css/wp-syntax4963.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='chld_thm_cfg_parent-css'  href='../../wp-content/themes/twentyfifteen/style433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/themes/twentyfifteen/genericons/genericonscf1b.css?ver=3.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-style-css'  href='../../wp-content/themes/bernie-2015-blog-theme/style433d.css?ver=4.9.11' type='text/css' media='all' />
<style id='twentyfifteen-style-inline-css' type='text/css'>

			.post-navigation .nav-next { background-image: url(../../wp-content/uploads/2015/10/js-cv-blog-post-title.png); border-top: 0; }
			.post-navigation .nav-next .post-title, .post-navigation .nav-next a:hover .post-title, .post-navigation .nav-next .meta-nav { color: #fff; }
			.post-navigation .nav-next a:before { background-color: rgba(0, 0, 0, 0.4); }
		
</style>
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../../wp-content/plugins/swfobj/swfobjectdc8c.js?ver=2.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-hide-post/public/js/wp-hide-post-public6471.js?ver=2.0.10'></script>
<link rel='https://api.w.org/' href='../../wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel='prev' title='How to make Karma / Jasmine tests fail on console errors' href='../make-karma-jasmine-tests-fail-on-console-errors/' />
<link rel='next' title='JavaScript Computer Vision &#8211; detecting waves' href='../javascript-computer-vision-detecting-waves/' />
<meta name="generator" content="WordPress 4.9.11" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../index043e.html?p=795' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embeda01b.json?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fon-abandoning-gulp%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embeddc3a?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fon-abandoning-gulp%2F&amp;format=xml" />

		<script type="text/javascript"> document.createElement("video");document.createElement("audio");document.createElement("track"); </script>
				<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- BEGIN GADWP v5.1.2.5 Universal Analytics - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-19810778-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- END GADWP Universal Analytics -->

<!-- START - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
 <!-- Facebook Open Graph -->
  <meta property="og:locale" content="en_GB"/>
  <meta property="og:site_name" content="Bernie Sumption&#039;s Blog"/>
  <meta property="og:title" content="On abandoning Gulp"/>
  <meta property="og:url" content="https://blog.berniesumption.com/software/on-abandoning-gulp/"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Keith Cirkel recently wrote that we should stop using Grunt &amp; Gulp for building frontend code and just use NPM scripts instead. This post is about my experience converting an existing app to use this pattern.

tl;dr: win. People should listen to Keith.



(Cartoon modified from Goober and"/>
  <meta property="og:image" content="/wp-content/uploads/2015/04/gulp-gulp-gulp.png"/>
  <meta property="article:published_time" content="2015-04-23T16:26:44+00:00"/>
  <meta property="article:modified_time" content="2019-10-17T08:06:35+00:00" />
  <meta property="og:updated_time" content="2019-10-17T08:06:35+00:00" />
  <meta property="article:section" content="Software"/>
 <!-- Google+ / Schema.org -->
  <meta itemprop="name" content="On abandoning Gulp"/>
  <meta itemprop="description" content="Keith Cirkel recently wrote that we should stop using Grunt &amp; Gulp for building frontend code and just use NPM scripts instead. This post is about my experience converting an existing app to use this pattern.

tl;dr: win. People should listen to Keith.



(Cartoon modified from Goober and"/>
  <meta itemprop="image" content="/wp-content/uploads/2015/04/gulp-gulp-gulp.png"/>
 <!-- Twitter Cards -->
  <meta name="twitter:title" content="On abandoning Gulp"/>
  <meta name="twitter:url" content="https://blog.berniesumption.com/software/on-abandoning-gulp/"/>
  <meta name="twitter:card" content="summary_large_image"/>
 <!-- SEO -->
  <meta name="description" content="Keith Cirkel recently wrote that we should stop using Grunt &amp; Gulp for building frontend code and just use NPM scripts instead. This post is about my experience converting an existing app to use this pattern.

tl;dr: win. People should listen to Keith.



(Cartoon modified from Goober and"/>
 <!-- Misc. tags -->
<!-- END - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
	
</head>

<body class="post-template-default single single-post postid-795 single-format-standard">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="../../" rel="home">Bernie Sumption&#039;s Blog</a></p>
											<p class="site-description">Various writings on software development and photography</p>
									<button class="secondary-toggle">Menu and widgets</button>
			</div><!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

		
		
					<div id="widget-area" class="widget-area" role="complementary">
				<aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
	<li class="cat-item cat-item-7"><a href="../../category/photography/" >Photography</a> (12)
</li>
	<li class="cat-item cat-item-1"><a href="../../category/software/" >Software</a> (29)
<ul class='children'>
	<li class="cat-item cat-item-14"><a href="../../category/software/dnartwork/" >DNArtwork</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/urandom/" >urandom</a> (1)
</li>
		</ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widget-title">Recent Posts</h2>		<ul>
											<li>
					<a href="../building-reliable-user-interfaces/">Strategies for building reliable user interfaces</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-generating-realistic-painted-shapes/">Making DNArtwork #8: Generating realistic painted shapes on-demand</a>
									</li>
											<li>
					<a href="../dnartwork/">Project: DNArtwork</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-how-it-works/">Making DNArtwork #7: how does it work?</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-first-art-print/">Making DNArtwork #6: the first art print, hot off the press</a>
									</li>
					</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul>
			<li><a href='../../2017/09/'>September 2017</a></li>
	<li><a href='../../2016/12/'>December 2016</a></li>
	<li><a href='../../2016/09/'>September 2016</a></li>
	<li><a href='../../2016/07/'>July 2016</a></li>
	<li><a href='../../2016/06/'>June 2016</a></li>
	<li><a href='../../2015/11/'>November 2015</a></li>
	<li><a href='../../2015/10/'>October 2015</a></li>
	<li><a href='../../2015/04/'>April 2015</a></li>
	<li><a href='../../2015/03/'>March 2015</a></li>
	<li><a href='../../2015/02/'>February 2015</a></li>
	<li><a href='../../2015/01/'>January 2015</a></li>
	<li><a href='../../2011/10/'>October 2011</a></li>
	<li><a href='../../2011/05/'>May 2011</a></li>
	<li><a href='../../2011/04/'>April 2011</a></li>
	<li><a href='../../2010/11/'>November 2010</a></li>
	<li><a href='../../2010/10/'>October 2010</a></li>
	<li><a href='../../2010/09/'>September 2010</a></li>
	<li><a href='../../2008/04/'>April 2008</a></li>
	<li><a href='../../2007/11/'>November 2007</a></li>
	<li><a href='../../2007/03/'>March 2007</a></li>
		</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24406">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">Nick Battle</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24404">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="index.html#comment-23795">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link">NotAScriptKiddy</span> on <a href="index.html#comment-23794">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://www.flickr.com/photos/judeapollo' rel='external nofollow' class='url'>Rory Melough</a></span> on <a href="../../photography/depth-of-field-for-geeks/index.html#comment-21881">Bernie&#8217;s Better Guide to Depth of Field for Geeks Who Want to be Digital Artists</a></li></ul></aside>			</div><!-- .widget-area -->
		
	</div><!-- .secondary -->

	</div><!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-795" class="post-795 post type-post status-publish format-standard has-post-thumbnail hentry category-software">
	
	<div class="post-thumbnail">
		<img width="781" height="300" src="../../wp-content/uploads/2015/04/gulp-gulp-gulp.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" srcset="/wp-content/uploads/2015/04/gulp-gulp-gulp.png 781w, /wp-content/uploads/2015/04/gulp-gulp-gulp-300x115.png 300w" sizes="(max-width: 781px) 100vw, 781px" />	</div><!-- .post-thumbnail -->

	
	<header class="entry-header">
		<h1 class="entry-title">On abandoning Gulp</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Keith Cirkel recently wrote that <a href="http://blog.keithcirkel.co.uk/why-we-should-stop-using-grunt/">we should stop using Grunt &amp; Gulp</a> for building frontend code and just use NPM scripts instead. This post is about my experience converting an existing app to use this pattern.</p>
<p>tl;dr: win. People should listen to Keith.</p>
<p><span id="more-795"></span></p>
<p><em style="font-size: 0.8em;">(Cartoon modified from <a href="http://www.gooberandcindy.com/archives/2011/gulp-gulp-gulp">Goober and Cindy</a>, © Daniel Barton, used with permission)</em></p>
<h3>The longer version</h3>
<p>For the last couple of months I&#8217;ve been working on a personal project called <a href="https://github.com/BernieSumption/tamarind">Tamarind,</a> a medium size (10K lines +) CoffeeScript application. I&#8217;ve been through a few build systems. I started with <a href="http://brunch.io/">Brunch</a>, which is lovely and very fast, but in the end I just couldn&#8217;t live with it&#8217;s limitations. I moved to <a href="http://gulpjs.com/">Gulp</a>, which is more flexible but a huge step backwards in usability.</p>
<p>I&#8217;ve now switched to Keith&#8217;s method and am very happy with the results.</p>
<h3>The problem</h3>
<p>To paraphrase Keith&#8217;s article, most frontend build tools &#8211; CoffeeScript, browserify, uglify, karma etc &#8211; already have a well designed command line API. By using Grunt or Gulp, you&#8217;re throwing that away and replacing it with a needlessly complex and often unintuitive JavaScript API.</p>
<p>For example, here&#8217;s the command line code to compile and minify some JavaScript for a web application:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">browserify main.js <span style="color: #660033;">--debug</span> <span style="color: #660033;">--outfile</span> main-debug.js
uglifyjs main-debug.js <span style="color: #660033;">--compress</span> <span style="color: #660033;">--source-map</span> main.js.map <span style="color: #660033;">--output</span> main.js</pre></td></tr></table><p class="theCode" style="display:none;">browserify main.js --debug --outfile main-debug.js
uglifyjs main-debug.js --compress --source-map main.js.map --output main.js</p></div>

<p>Pretty readable, and if you don&#8217;t understand what any option does then typing <code style="white-space: nowrap;">browserify --help</code> will print out a manual page.</p>
<p>Here&#8217;s the same thing in Gulp:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;">browserify   <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'browserify'</span>
gulp         <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'gulp'</span>
rename       <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'gulp-rename'</span>
sourcemaps   <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'gulp-sourcemaps'</span>
transform    <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'vinyl-transform'</span>
uglify       <span style="color: #339933;">=</span> require <span style="color: #3366CC;">'gulp-uglify'</span>
# based on<span style="color: #339933;">:</span> https<span style="color: #339933;">:</span><span style="color: #006600; font-style: italic;">//github.com/gulpjs/gulp/blob/master/docs/recipes/browserify-uglify-sourcemap.md</span>
gulp.<span style="color: #660066;">task</span> <span style="color: #3366CC;">'build-scripts'</span><span style="color: #339933;">,</span> <span style="color: #339933;">-&gt;</span>
  browserified <span style="color: #339933;">=</span> transform<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#40;</span>filename<span style="color: #009900;">&#41;</span> <span style="color: #339933;">-&gt;</span>
    <span style="color: #000066; font-weight: bold;">return</span> browserify<span style="color: #009900;">&#40;</span>entries<span style="color: #339933;">:</span> filename<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">bundle</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
  <span style="color: #009900;">&#41;</span>
  gulp.<span style="color: #660066;">src</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'main.js'</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>browserified<span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>rename <span style="color: #3366CC;">'main-debug.js'</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>gulp.<span style="color: #660066;">dest</span> BUILD_DIR<span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>sourcemaps.<span style="color: #660066;">init</span><span style="color: #009900;">&#40;</span>loadMaps<span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>rename <span style="color: #3366CC;">'main.js'</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>uglify<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>sourcemaps.<span style="color: #660066;">write</span> <span style="color: #3366CC;">'./'</span><span style="color: #009900;">&#41;</span>
    .<span style="color: #660066;">pipe</span><span style="color: #009900;">&#40;</span>gulp.<span style="color: #660066;">dest</span> BUILD_DIR<span style="color: #009900;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">browserify   = require 'browserify'
gulp         = require 'gulp'
rename       = require 'gulp-rename'
sourcemaps   = require 'gulp-sourcemaps'
transform    = require 'vinyl-transform'
uglify       = require 'gulp-uglify'
# based on: https://github.com/gulpjs/gulp/blob/master/docs/recipes/browserify-uglify-sourcemap.md
gulp.task 'build-scripts', -&gt;
  browserified = transform((filename) -&gt;
    return browserify(entries: filename).bundle()
  )
  gulp.src('main.js')
    .pipe(browserified)
    .pipe(rename 'main-debug.js')
    .pipe(gulp.dest BUILD_DIR)
    .pipe(sourcemaps.init(loadMaps: true))
    .pipe(rename 'main.js')
    .pipe(uglify())
    .pipe(sourcemaps.write './')
    .pipe(gulp.dest BUILD_DIR)</p></div>

<p>Everything in the above code is there for a reason, and once you&#8217;ve been using Gulp for a while it all starts to make sense. But, damn it&#8217;s ugly. Moreover it&#8217;s brittle &#8211; the correct behaviour relies on the exact ordering of lines.</p>
<h3>The solution</h3>
<p>Keith wrote a <a href="http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/">follow-up post</a> giving more detail on implementation, but it all boils down to: use the command line API for each build tool, and wrap up your commands using <a href="https://docs.npmjs.com/misc/scripts">npm&#8217;s scripts feature</a>.</p>
<p>Here&#8217;s the full <code>scripts</code> code for Tamarind&#8217;s package.json, and it handles building, testing and running a live-reloading development server. It replaces a 140 line Gulp script and has an extra feature &#8211; documentation generation with Codo.</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span>
  <span style="color: #3366CC;">&quot;scripts&quot;</span><span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #3366CC;">&quot;clean&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;rm -rf node_modules build; mkdir build; npm install&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;build&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;mkdir -p build; ./node_modules/.bin/browserify app/tamarind/Tamarind.coffee --debug --standalone Tamarind --outfile build/tamarind-debug.js&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;minify&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;echo 'cd build &amp;amp;&amp;amp; ../node_modules/.bin/uglifyjs tamarind-debug.js --compress --source-map tamarind.js.map --output tamarind.js' | sh&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;doc&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;node_modules/codo/bin/codo app/**/*.coffee&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;copy-assets&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;cp -r app/assets/* ./build/&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;dist:noclean&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;npm run build &amp;amp;&amp;amp; npm run minify &amp;amp;&amp;amp; npm run doc &amp;amp;&amp;amp; npm run copy-assets &amp;amp;&amp;amp; rm -rf dist &amp;amp;&amp;amp; cp -r build dist&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;dist&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;npm run clean &amp;amp;&amp;amp; npm run dist:noclean&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;start&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;./node_modules/.bin/beefy app/tamarind/Tamarind.coffee:tamarind.js --live --index app/assets/test/Tamarind-demo.html -- --standalone Tamarind&quot;</span><span style="color: #339933;">,</span>
    <span style="color: #3366CC;">&quot;test&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;echo 'NOTE! FOR LIVE TESTS, RUN `npm install -g karma-cli` THEN `karma start`'; node_modules/.bin/karma start --single-run&quot;</span>
  <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">{
  &quot;scripts&quot;: {
    &quot;clean&quot;: &quot;rm -rf node_modules build; mkdir build; npm install&quot;,
    &quot;build&quot;: &quot;mkdir -p build; ./node_modules/.bin/browserify app/tamarind/Tamarind.coffee --debug --standalone Tamarind --outfile build/tamarind-debug.js&quot;,
    &quot;minify&quot;: &quot;echo 'cd build &amp;amp;&amp;amp; ../node_modules/.bin/uglifyjs tamarind-debug.js --compress --source-map tamarind.js.map --output tamarind.js' | sh&quot;,
    &quot;doc&quot;: &quot;node_modules/codo/bin/codo app/**/*.coffee&quot;,
    &quot;copy-assets&quot;: &quot;cp -r app/assets/* ./build/&quot;,
    &quot;dist:noclean&quot;: &quot;npm run build &amp;amp;&amp;amp; npm run minify &amp;amp;&amp;amp; npm run doc &amp;amp;&amp;amp; npm run copy-assets &amp;amp;&amp;amp; rm -rf dist &amp;amp;&amp;amp; cp -r build dist&quot;,
    &quot;dist&quot;: &quot;npm run clean &amp;amp;&amp;amp; npm run dist:noclean&quot;,
    &quot;start&quot;: &quot;./node_modules/.bin/beefy app/tamarind/Tamarind.coffee:tamarind.js --live --index app/assets/test/Tamarind-demo.html -- --standalone Tamarind&quot;,
    &quot;test&quot;: &quot;echo 'NOTE! FOR LIVE TESTS, RUN `npm install -g karma-cli` THEN `karma start`'; node_modules/.bin/karma start --single-run&quot;
  }
}</p></div>

<p>Note how the <code>dist</code> tasks use <code>npm run</code> to delegate to other tasks. Simple and effective. The whole thing took about an hour to write including testing.</p>
<h3>Caveat</h3>
<p>Gulp uses JavaScript code for configuration, which means that it has complete flexibility and you can use modules to manage complexity. There are no doubt situations where this flexibility is desirable. For example, suppose you have many projects with the same build process. You could create a JavaScript module to configure the build and re-use it between your projects. Then your Gulpfile would look like this:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">module.exports = require<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">&quot;my-shared-build-process&quot;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></pre></td></tr></table><p class="theCode" style="display:none;">module.exports = require(&quot;my-shared-build-process&quot;)</p></div>

<p>But before using Gulp, ask yourself if all that complexity and flexibility is really required.</p>
	</div><!-- .entry-content -->

	
	<footer class="entry-footer">
		<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2015-04-23T16:26:44+00:00">23rd April 2015</time><time class="updated" datetime="2019-10-17T08:06:35+00:00">17th October 2019</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="../../author/bernie/">bernie</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/software/" rel="category tag">Software</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-## -->

<div id="comments" class="comments-area">

			<h2 class="comments-title">
			8 thoughts on &ldquo;On abandoning Gulp&rdquo;		</h2>

		
		<ol class="comment-list">
					<li id="comment-6194" class="comment even thread-even depth-1">
			<article id="div-comment-6194" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/0e9e35c72f7af16ddd3e0d88be8da654?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/0e9e35c72f7af16ddd3e0d88be8da654?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">mp</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-6194">
							<time datetime="2015-06-23T10:51:37+00:00">
								23rd June 2015 at 10:51 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>BTW, you don&#8217;t need ./node_modules/.bin/ prefix for executables, npm handles that for you.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8390" class="comment odd alt thread-odd thread-alt depth-1 parent">
			<article id="div-comment-8390" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/68b78bde3ec11991ea318bc9464be945?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/68b78bde3ec11991ea318bc9464be945?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Chad</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-8390">
							<time datetime="2015-09-06T21:31:14+00:00">
								6th September 2015 at 9:31 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Double win, use JSPM/system.js?</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-8438" class="comment byuser comment-author-bernie bypostauthor even depth-2">
			<article id="div-comment-8438" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-8438">
							<time datetime="2015-09-08T10:21:33+00:00">
								8th September 2015 at 10:21 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>ES6 modules (and the JSPM/system.js projects that will smooth their adoption) are going to be a great boon to the JS community and solve lots of problems with the current state of affairs.</p>
<p>Still, in a post-ES6 we&#8217;ll still need build systems. Your JS in a complex app will still need to be minified and concatenated, and the build handles other tasks like compiling LESS to CSS and generating regular versions of retina images.</p>
<p>Cheers,</p>
<p>Bernie     :o)</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-16740" class="comment odd alt thread-even depth-1">
			<article id="div-comment-16740" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/2cff6a824f253431203127f20de038e6?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/2cff6a824f253431203127f20de038e6?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Christopher</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-16740">
							<time datetime="2016-01-26T17:57:54+00:00">
								26th January 2016 at 5:57 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You may have discovered this by now but in package.json you can omit the `./node_modules/.bin/` when starting executables that were installed locally with npm.</p>
<p>I still use gulp, but I don&#8217;t want to force others to install gulp globally, so I do this:<br />
&#8220;dependencies&#8221;: {<br />
  &#8220;gulp&#8221;: &#8220;latest&#8221;<br />
},<br />
&#8220;scripts&#8221;: {<br />
  &#8220;start&#8221;: &#8220;gulp build&#8221;<br />
}</p>
<p>This will also let me switch to the next shinier gulp replacement without changing my build instructions at all. npm scripts are great, but it doesn&#8217;t have to be all or nothing.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-20239" class="comment even thread-odd thread-alt depth-1 parent">
			<article id="div-comment-20239" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/9986c9a01046d372442cd347850df617?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/9986c9a01046d372442cd347850df617?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Richard Rivers</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20239">
							<time datetime="2016-09-11T17:19:32+00:00">
								11th September 2016 at 5:19 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>It does makes certain sense in simplifying things, however its rather limiting in flexibility and speed.<br />
a) Can your npm example do watch on files or folders and process only those files that had changed?<br />
Moreover, in watch mode, Gulp code/tasks are already compiled and ready to run, fast. Npm scripts however runs a new npm each time and is slow.<br />
b) Gulp pipes uses in-memory node stream which is much faster than disk io.<br />
c) Gulp is basically javascript code, which gives it unlimited flexibility, including logical operations and running of shell scripts. Npm script is basically just console shell scripts alone.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-20272" class="comment byuser comment-author-bernie bypostauthor odd alt depth-2">
			<article id="div-comment-20272" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20272">
							<time datetime="2016-09-15T09:18:45+00:00">
								15th September 2016 at 9:18 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>a) Yes. The example in the post doesn&#8217;t use it, but 6 months later I&#8217;m still using package scripts, and I&#8217;m doing watch mode perfectly happily. I use the watch mode built into many npm packages, e.g. with the &#8211;watch flag on the typescript compiler. If there&#8217;s no built in watch mode I use <a href="https://www.npmjs.com/package/wr" rel="nofollow">wr</a>. I serve from <a href="http://npmjs.com/package/live-server" rel="nofollow">live-server</a> to get browser refresh.</p>
<p>b) I don&#8217;t notice my live builds being slow. One second from changing a file to seeing  the changes reflect in the browser.</p>
<p>c) Yup, glorious, simple shell scripts. Love &#8217;em.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-23794" class="comment even thread-even depth-1 parent">
			<article id="div-comment-23794" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/8ee1da1b8756ce46b6015420efbd5483?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/8ee1da1b8756ce46b6015420efbd5483?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">NotAScriptKiddy</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-23794">
							<time datetime="2017-11-30T11:21:57+00:00">
								30th November 2017 at 11:21 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You may continue to love you shell scripts. But to state that the posted package.json is more readable than a Gulp script or in any kind readable at all is just pure nonsense (just look at the highlighting&#8230;).</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-23795" class="comment byuser comment-author-bernie bypostauthor odd alt depth-2">
			<article id="div-comment-23795" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-23795">
							<time datetime="2017-11-30T12:34:36+00:00">
								30th November 2017 at 12:34 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>To be clear, I didn&#8217;t post the Gulp file that the package.json replaced, but trust me it was hideous! If anything, syntax highlighting in Gulp files just serves to highlight all that unnecessary noise and implementation details, calls to .pipe(), functions etc. And this is just talking about readability &#8211; writability of Gulp files is even worse, for example getting calls to .pipe() in the wrong order will totally break things, so you need to understand what&#8217;s going on under the hood. Command line interfaces are more of a black box, and generally you can mix arguments around and not break things.</p>
<p>So yes I&#8217;d argue that the package.json was a big improvement, but you&#8217;re right that it could be further improved. Embedding shell scripts in JSON isn&#8217;t exactly pretty.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
			<p class="no-comments">Comments are closed.</p>
	
	
</div><!-- .comments-area -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../make-karma-jasmine-tests-fail-on-console-errors/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">How to make Karma / Jasmine tests fail on console errors</span></a></div><div class="nav-next"><a href="../javascript-computer-vision-detecting-waves/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">JavaScript Computer Vision &#8211; detecting waves</span></a></div></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- .site-content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- .site-footer -->

</div><!-- .site -->

<script type='text/javascript'>
var colomatduration = 'fast';
var colomatslideEffect = 'slideFade';
</script><script type='text/javascript' src='../../wp-content/plugins/jquery-collapse-o-matic/js/collapse7514.js?ver=1.6.6'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-syntax/js/wp-syntax4963.js?ver=1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/skip-link-focus-fixd01e.js?ver=20141010'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/functions8337.js?ver=20150330'></script>

</body>

<!-- Mirrored from blog.berniesumption.com/software/on-abandoning-gulp/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:33:36 GMT -->
</html>

<!-- Dynamic page generated in 1.917 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-10-17 12:31:43 -->

<!-- super cache -->