<!DOCTYPE html>
<html lang="en-GB" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#" class="no-js">

<!-- Mirrored from blog.berniesumption.com/software/graphics-programming-environments-3-javascript-canvas/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:35:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="/wp-content/themes/twentyfifteen/js/html5.js"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Graphics Programming Environment Shootout Episode 3: JavaScript &#038; Canvas &#8211; Bernie Sumption&#039;s Blog</title>
<link rel='dns-prefetch' href='http://vjs.zencdn.net/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Feed" href="../../feed/" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Comments Feed" href="../../comments/feed/" />
<link rel='stylesheet' id='collapseomatic-css-css'  href='../../wp-content/plugins/jquery-collapse-o-matic/light_stylef24c.css?ver=1.6' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-plugin-css'  href='../../wp-content/plugins/videojs-html5-video-player-for-wordpress/plugin-styles433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-css'  href='http://vjs.zencdn.net/4.5/video-js.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='../../wp-content/plugins/wp-syntax/css/wp-syntax4963.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='chld_thm_cfg_parent-css'  href='../../wp-content/themes/twentyfifteen/style433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/themes/twentyfifteen/genericons/genericonscf1b.css?ver=3.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-style-css'  href='../../wp-content/themes/bernie-2015-blog-theme/style433d.css?ver=4.9.11' type='text/css' media='all' />
<style id='twentyfifteen-style-inline-css' type='text/css'>

			.post-navigation .nav-previous { background-image: url(../../wp-content/uploads/2011/10/sparks-header-image-825x510.jpg); }
			.post-navigation .nav-previous .post-title, .post-navigation .nav-previous a:hover .post-title, .post-navigation .nav-previous .meta-nav { color: #fff; }
			.post-navigation .nav-previous a:before { background-color: rgba(0, 0, 0, 0.4); }
		
			.post-navigation .nav-next { background-image: url(../../wp-content/uploads/2015/01/BernieBlogHeaderImage-825x510.jpg); border-top: 0; }
			.post-navigation .nav-next .post-title, .post-navigation .nav-next a:hover .post-title, .post-navigation .nav-next .meta-nav { color: #fff; }
			.post-navigation .nav-next a:before { background-color: rgba(0, 0, 0, 0.4); }
		
</style>
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../../wp-content/plugins/swfobj/swfobjectdc8c.js?ver=2.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-hide-post/public/js/wp-hide-post-public6471.js?ver=2.0.10'></script>
<link rel='https://api.w.org/' href='../../wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel='prev' title='Graphics Programming Environment Shootout Episode 2: ActionScript' href='../graphics-programming-environments-2-actionscript/' />
<link rel='next' title='Hello World' href='../../urandom/hello-world/' />
<meta name="generator" content="WordPress 4.9.11" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../indexb645.html?p=489' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed15e1.json?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fgraphics-programming-environments-3-javascript-canvas%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed1c68?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fgraphics-programming-environments-3-javascript-canvas%2F&amp;format=xml" />

		<script type="text/javascript"> document.createElement("video");document.createElement("audio");document.createElement("track"); </script>
				<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- BEGIN GADWP v5.1.2.5 Universal Analytics - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-19810778-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- END GADWP Universal Analytics -->

<!-- START - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
 <!-- Facebook Open Graph -->
  <meta property="og:locale" content="en_GB"/>
  <meta property="og:site_name" content="Bernie Sumption&#039;s Blog"/>
  <meta property="og:title" content="Graphics Programming Environment Shootout Episode 3: JavaScript &amp; Canvas"/>
  <meta property="og:url" content="https://blog.berniesumption.com/software/graphics-programming-environments-3-javascript-canvas/"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="This article is the third in a series in which I implement the same app in several different graphical programming environments. Today&#039;s contender: JavaScript &amp; canvas.



Canvas is one of the new APIs introduced in the flurry of specifying activity by the W3C that got bundled together under"/>
  <meta property="og:image" content="/wp-content/uploads/2011/10/sparks-header-image.jpg"/>
  <meta property="article:published_time" content="2011-10-27T15:49:18+00:00"/>
  <meta property="article:modified_time" content="2019-10-17T08:06:36+00:00" />
  <meta property="og:updated_time" content="2019-10-17T08:06:36+00:00" />
  <meta property="article:section" content="Software"/>
 <!-- Google+ / Schema.org -->
  <meta itemprop="name" content="Graphics Programming Environment Shootout Episode 3: JavaScript &amp; Canvas"/>
  <meta itemprop="description" content="This article is the third in a series in which I implement the same app in several different graphical programming environments. Today&#039;s contender: JavaScript &amp; canvas.



Canvas is one of the new APIs introduced in the flurry of specifying activity by the W3C that got bundled together under"/>
  <meta itemprop="image" content="/wp-content/uploads/2011/10/sparks-header-image.jpg"/>
 <!-- Twitter Cards -->
  <meta name="twitter:title" content="Graphics Programming Environment Shootout Episode 3: JavaScript &amp; Canvas"/>
  <meta name="twitter:url" content="https://blog.berniesumption.com/software/graphics-programming-environments-3-javascript-canvas/"/>
  <meta name="twitter:card" content="summary_large_image"/>
 <!-- SEO -->
  <meta name="description" content="This article is the third in a series in which I implement the same app in several different graphical programming environments. Today&#039;s contender: JavaScript &amp; canvas.



Canvas is one of the new APIs introduced in the flurry of specifying activity by the W3C that got bundled together under"/>
 <!-- Misc. tags -->
<!-- END - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
	
</head>

<body class="post-template-default single single-post postid-489 single-format-standard">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="../../" rel="home">Bernie Sumption&#039;s Blog</a></p>
											<p class="site-description">Various writings on software development and photography</p>
									<button class="secondary-toggle">Menu and widgets</button>
			</div><!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

		
		
					<div id="widget-area" class="widget-area" role="complementary">
				<aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
	<li class="cat-item cat-item-7"><a href="../../category/photography/" >Photography</a> (12)
</li>
	<li class="cat-item cat-item-1"><a href="../../category/software/" >Software</a> (29)
<ul class='children'>
	<li class="cat-item cat-item-14"><a href="../../category/software/dnartwork/" >DNArtwork</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/urandom/" >urandom</a> (1)
</li>
		</ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widget-title">Recent Posts</h2>		<ul>
											<li>
					<a href="../building-reliable-user-interfaces/">Strategies for building reliable user interfaces</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-generating-realistic-painted-shapes/">Making DNArtwork #8: Generating realistic painted shapes on-demand</a>
									</li>
											<li>
					<a href="../dnartwork/">Project: DNArtwork</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-how-it-works/">Making DNArtwork #7: how does it work?</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-first-art-print/">Making DNArtwork #6: the first art print, hot off the press</a>
									</li>
					</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul>
			<li><a href='../../2017/09/'>September 2017</a></li>
	<li><a href='../../2016/12/'>December 2016</a></li>
	<li><a href='../../2016/09/'>September 2016</a></li>
	<li><a href='../../2016/07/'>July 2016</a></li>
	<li><a href='../../2016/06/'>June 2016</a></li>
	<li><a href='../../2015/11/'>November 2015</a></li>
	<li><a href='../../2015/10/'>October 2015</a></li>
	<li><a href='../../2015/04/'>April 2015</a></li>
	<li><a href='../../2015/03/'>March 2015</a></li>
	<li><a href='../../2015/02/'>February 2015</a></li>
	<li><a href='../../2015/01/'>January 2015</a></li>
	<li><a href='../../2011/10/'>October 2011</a></li>
	<li><a href='../../2011/05/'>May 2011</a></li>
	<li><a href='../../2011/04/'>April 2011</a></li>
	<li><a href='../../2010/11/'>November 2010</a></li>
	<li><a href='../../2010/10/'>October 2010</a></li>
	<li><a href='../../2010/09/'>September 2010</a></li>
	<li><a href='../../2008/04/'>April 2008</a></li>
	<li><a href='../../2007/11/'>November 2007</a></li>
	<li><a href='../../2007/03/'>March 2007</a></li>
		</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24406">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">Nick Battle</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24404">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../on-abandoning-gulp/index.html#comment-23795">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link">NotAScriptKiddy</span> on <a href="../on-abandoning-gulp/index.html#comment-23794">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://www.flickr.com/photos/judeapollo' rel='external nofollow' class='url'>Rory Melough</a></span> on <a href="../../photography/depth-of-field-for-geeks/index.html#comment-21881">Bernie&#8217;s Better Guide to Depth of Field for Geeks Who Want to be Digital Artists</a></li></ul></aside>			</div><!-- .widget-area -->
		
	</div><!-- .secondary -->

	</div><!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-489" class="post-489 post type-post status-publish format-standard has-post-thumbnail hentry category-software">
	
	<div class="post-thumbnail">
		<img width="825" height="510" src="../../wp-content/uploads/2011/10/sparks-header-image-825x510.jpg" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" srcset="/wp-content/uploads/2011/10/sparks-header-image-825x510.jpg 825w, /wp-content/uploads/2011/10/sparks-header-image-300x186.jpg 300w" sizes="(max-width: 825px) 100vw, 825px" />	</div><!-- .post-thumbnail -->

	
	<header class="entry-header">
		<h1 class="entry-title">Graphics Programming Environment Shootout Episode 3: JavaScript &#038; Canvas</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		<p>This article is the third in a <a href="../graphics-programming-environments/">series</a> in which I implement the same app in several different graphical programming environments. Today&#8217;s contender: JavaScript &amp; canvas.</p>
<p><span id="more-489"></span></p>
<p>Canvas is one of the new APIs introduced in the flurry of specifying activity by the W3C that got bundled together under the HTML5 monicker. A canvas is a rectangular area of the HTML page that contains a raster image which can be manipulated using JavaScript. Unlike the other graphical environments covered so far, canvas is a specification that is implemented by multiple browsers, each of which has its own performance characteristics.</p>
<h3>&#8220;imagine&#8221; in JavaScript &amp; canvas</h3>
<p>You can view the implementation of <a href="http://berniesumption.github.io/color-sparks/" target="_blank">&#8220;imagine&#8221; in JavaScript &amp; canvas</a> and check out the <a href="https://github.com/BernieSumption/color-sparks">source code here</a></p>
<p><em>Performance:</em> On my Intel Core i7 MacBook, the frame rates with 8000 sparks on screen were 4.3 fps in Firefox 7, 6.2 fps in Chrome 15 and 6.0 fps in Safari 5.1. These figures are pretty terrible compared to the other environments I&#8217;ve covered so far, but there is a good explanation: canvas anti-aliases all lines, which precludes a performance optimisation that was possible in both Flash and Processing.</p>
<p>Anti-aliasing is a useful technique for producing smooth edges on vector graphics. This image is magnified 600% to make the individual pixels clearer:</p>
<figure id="attachment_491" style="width: 600px" class="wp-caption alignnone"><img class="size-full wp-image-491" title="" src="../../wp-content/uploads/2011/10/anti-aliasing-on-circles.png" alt="" width="600" height="120" srcset="/wp-content/uploads/2011/10/anti-aliasing-on-circles.png 600w, /wp-content/uploads/2011/10/anti-aliasing-on-circles-300x60.png 300w" sizes="(max-width: 600px) 100vw, 600px" /><figcaption class="wp-caption-text">Anti-aliasing make shapes appear smooth on a limited resolution display</figcaption></figure>
<p>Anti-aliasing is computationally expensive however. The Processing and Flash versions of <em>imagine</em> turn off antialiasing and replace it with an alternative technique &#8211; as long as the rendered shape is moving at a roughly constant rate, simply making the shape semi-transparent will produce a smoothing effect:</p>
<figure id="attachment_493" style="width: 600px" class="wp-caption alignnone"><img class="size-full wp-image-493" title="" src="../../wp-content/uploads/2011/10/anti-aliasing-on-circles-2.png" alt="" width="600" height="300" /><figcaption class="wp-caption-text">Poor man&#8217;s anti-aliasing works just as well as the real thing in certain circumstances</figcaption></figure>
<p>So this performance comparison is not exactly fair. I made another version of the canvas app that uses squares instead of circles. Squares are considerably faster to draw, and the performance for this version is in line with the Flash and Processing versions.</p>
<h3>Programming with JavaScript &amp; canvas</h3>
<p>In the last two episodes I&#8217;ve provided a port of the simplest animated graphical app I could conceive of. I noted that the ActionScript version was around twice as long because of the overhead of setting up a raster drawing environment in a general purpose drawing framework.</p>
<p>Well the JavaScript version is almost as long as the Flash version, but not for exactly the same reason:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="actionscript" style="font-family:monospace;">window.<span style="color: #0066CC;">onload</span> = <span style="color: #000000; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span>
  <span style="color: #000000; font-weight: bold;">var</span> canvas = document.<span style="color: #0066CC;">createElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;canvas&quot;</span><span style="color: #66cc66;">&#41;</span>;
  document.<span style="color: #006600;">body</span>.<span style="color: #0066CC;">appendChild</span><span style="color: #66cc66;">&#40;</span>canvas<span style="color: #66cc66;">&#41;</span>;
  canvas.<span style="color: #0066CC;">width</span> = <span style="color: #cc66cc;">400</span>;
  canvas.<span style="color: #0066CC;">height</span> = <span style="color: #cc66cc;">400</span>;
  <span style="color: #000000; font-weight: bold;">var</span> ctx = canvas <span style="color: #66cc66;">&amp;</span>amp;<span style="color: #66cc66;">&amp;</span>amp; canvas.<span style="color: #006600;">getContext</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;2d&quot;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
  <span style="color: #000000; font-weight: bold;">var</span> bg = <span style="color: #ff0000;">&quot;#FF0088&quot;</span>;
  document.<span style="color: #006600;">body</span>.<span style="color: #006600;">onclick</span> = reset;
  reset<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
  <span style="color: #0066CC;">setInterval</span><span style="color: #66cc66;">&#40;</span>draw, <span style="color: #cc66cc;">50</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
  <span style="color: #000000; font-weight: bold;">function</span> draw<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">var</span> radius = <span style="color: #0066CC;">random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">5</span>, <span style="color: #cc66cc;">50</span><span style="color: #66cc66;">&#41;</span>;
    ctx.<span style="color: #006600;">beginPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
    ctx.<span style="color: #006600;">arc</span><span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">random</span><span style="color: #66cc66;">&#40;</span>-<span style="color: #cc66cc;">100</span>, <span style="color: #cc66cc;">500</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #0066CC;">random</span><span style="color: #66cc66;">&#40;</span>-<span style="color: #cc66cc;">100</span>, <span style="color: #cc66cc;">500</span><span style="color: #66cc66;">&#41;</span>,
        radius, <span style="color: #cc66cc;">0</span>, <span style="color: #0066CC;">Math</span>.<span style="color: #0066CC;">PI</span> <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">2</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;
    ctx.<span style="color: #006600;">closePath</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
    ctx.<span style="color: #006600;">strokeStyle</span> = <span style="color: #ff0000;">&quot;#000&quot;</span>;
    ctx.<span style="color: #006600;">lineWidth</span> = <span style="color: #cc66cc;">1</span>;
    ctx.<span style="color: #006600;">fillStyle</span> = <span style="color: #ff0000;">&quot;#FFF&quot;</span>;
    ctx.<span style="color: #006600;">fill</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
    ctx.<span style="color: #006600;">stroke</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
  <span style="color: #66cc66;">&#125;</span>
&nbsp;
  <span style="color: #000000; font-weight: bold;">function</span> reset<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span>
    ctx.<span style="color: #006600;">fillStyle</span> = bg;
    ctx.<span style="color: #006600;">fillRect</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span>, <span style="color: #cc66cc;">0</span>, canvas.<span style="color: #0066CC;">width</span>, canvas.<span style="color: #0066CC;">height</span><span style="color: #66cc66;">&#41;</span>;
  <span style="color: #66cc66;">&#125;</span>
&nbsp;
  <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #0066CC;">random</span><span style="color: #66cc66;">&#40;</span>from, to<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span>
    <span style="color: #b1b100;">return</span> from + <span style="color: #0066CC;">Math</span>.<span style="color: #0066CC;">random</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#40;</span>to - from<span style="color: #66cc66;">&#41;</span>;
  <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">window.onload = function() {
  var canvas = document.createElement(&quot;canvas&quot;);
  document.body.appendChild(canvas);
  canvas.width = 400;
  canvas.height = 400;
  var ctx = canvas &amp;amp;&amp;amp; canvas.getContext(&quot;2d&quot;);
  
  var bg = &quot;#FF0088&quot;;
  document.body.onclick = reset;
  reset();
  setInterval(draw, 50);
  
  function draw() {
    var radius = random(5, 50);
    ctx.beginPath();
    ctx.arc(random(-100, 500), random(-100, 500),
        radius, 0, Math.PI * 2, false);
    ctx.closePath();
    
    ctx.strokeStyle = &quot;#000&quot;;
    ctx.lineWidth = 1;
    ctx.fillStyle = &quot;#FFF&quot;;
    ctx.fill();
    ctx.stroke();
  }
  
  function reset() {
    ctx.fillStyle = bg;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  }
  
  function random(from, to) {
    return from + Math.random() * (to - from);
  }
}</p></div>

<p>Check out the the <a href="http://berniesumption.github.io/color-sparks/" target="_blank">running application here</a>.</p>
<p>Two things make this sample longer than the Processing version.</p>
<p>Firstly, like Flash&#8217;s raster drawing functionality, canvas is just a small part of the total functionality offered by HTML environment. A few lines are therefore dedicated to setting up the environment for animated raster drawing. This makes it harder for a beginner to get started with canvas, though finding code samples for canvas on the net is easier than for the Flash equivalent.</p>
<p>Secondly, the actual drawing code inside <code>draw()</code> is longer. Common drawing operations are split into calls to geometry methods like <code>arc()</code> which describe a path, and painting methods like <code>stroke()</code> that render the most recently described path. I&#8217;m sure the guys at Apple had their reasons for designing the API the way they did, but for basic operations it means that you have more lines of code for the same effect.</p>
<p>If you&#8217;re intending to write a lot of drawing code, you&#8217;d be well advised to factor out the verbose canvas API into some simple drawing methods. This code for example, will replace 8 lines of drawing code with a one line method call:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="actionscript" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> drawFilledCircle<span style="color: #66cc66;">&#40;</span>x, y, radius, strokeColor, fillColor<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span>
  ctx.<span style="color: #006600;">beginPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
  ctx.<span style="color: #006600;">arc</span><span style="color: #66cc66;">&#40;</span>x, y, radius, <span style="color: #cc66cc;">0</span>, <span style="color: #0066CC;">Math</span>.<span style="color: #0066CC;">PI</span> <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">2</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;
  ctx.<span style="color: #006600;">closePath</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
  ctx.<span style="color: #006600;">strokeStyle</span> = strokeColor;
  ctx.<span style="color: #006600;">lineWidth</span> = <span style="color: #cc66cc;">1</span>;
  ctx.<span style="color: #006600;">fillStyle</span> = fillColor;
  ctx.<span style="color: #006600;">fill</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
  ctx.<span style="color: #006600;">stroke</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">function drawFilledCircle(x, y, radius, strokeColor, fillColor) {
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI * 2, false);
  ctx.closePath();
  ctx.strokeStyle = strokeColor;
  ctx.lineWidth = 1;
  ctx.fillStyle = fillColor;
  ctx.fill();
  ctx.stroke();
}</p></div>

<p>This is something that the JavaScript community is quite good at, since JavaScript has a history of clunky APIs that need wrapping to make usable. The W3C DOM wrapped in jQuery springs to mind.</p>
<h3>Conclusion</h3>
<p>Despite having a limitation that made it slow for <em>imagine</em>, canvas is a flexible and capable raster drawing API, but one that really needs to be wrapped in a library for maximum usability.</p>
<p>Next up: Google NaCl (coming soon)</p>
	</div><!-- .entry-content -->

	
	<footer class="entry-footer">
		<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2011-10-27T15:49:18+00:00">27th October 2011</time><time class="updated" datetime="2019-10-17T08:06:36+00:00">17th October 2019</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="../../author/bernie/">bernie</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/software/" rel="category tag">Software</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-## -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../graphics-programming-environments-2-actionscript/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Graphics Programming Environment Shootout Episode 2: ActionScript</span></a></div><div class="nav-next"><a href="../../urandom/hello-world/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">Hello World</span></a></div></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- .site-content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- .site-footer -->

</div><!-- .site -->

<script type='text/javascript'>
var colomatduration = 'fast';
var colomatslideEffect = 'slideFade';
</script><script type='text/javascript' src='../../wp-content/plugins/jquery-collapse-o-matic/js/collapse7514.js?ver=1.6.6'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-syntax/js/wp-syntax4963.js?ver=1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/skip-link-focus-fixd01e.js?ver=20141010'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/functions8337.js?ver=20150330'></script>

</body>

<!-- Mirrored from blog.berniesumption.com/software/graphics-programming-environments-3-javascript-canvas/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:35:29 GMT -->
</html>

<!-- Dynamic page generated in 0.497 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-10-17 12:33:05 -->

<!-- super cache -->