<!DOCTYPE html>
<html lang="en-GB" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#" class="no-js">

<!-- Mirrored from blog.berniesumption.com/software/building-reliable-user-interfaces/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:32:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="/wp-content/themes/twentyfifteen/js/html5.js"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Strategies for building reliable user interfaces &#8211; Bernie Sumption&#039;s Blog</title>
<link rel='dns-prefetch' href='http://vjs.zencdn.net/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Feed" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Comments Feed" href="../../comments/feed/index.html" />
<link rel='stylesheet' id='collapseomatic-css-css'  href='../../wp-content/plugins/jquery-collapse-o-matic/light_stylef24c.css?ver=1.6' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-plugin-css'  href='../../wp-content/plugins/videojs-html5-video-player-for-wordpress/plugin-styles433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-css'  href='http://vjs.zencdn.net/4.5/video-js.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='../../wp-content/plugins/wp-syntax/css/wp-syntax4963.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='chld_thm_cfg_parent-css'  href='../../wp-content/themes/twentyfifteen/style433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/themes/twentyfifteen/genericons/genericonscf1b.css?ver=3.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-style-css'  href='../../wp-content/themes/bernie-2015-blog-theme/style433d.css?ver=4.9.11' type='text/css' media='all' />
<style id='twentyfifteen-style-inline-css' type='text/css'>

			.post-navigation .nav-previous { background-image: url(../../wp-content/uploads/2017/09/dnartwork-painted-close-up.jpg); }
			.post-navigation .nav-previous .post-title, .post-navigation .nav-previous a:hover .post-title, .post-navigation .nav-previous .meta-nav { color: #fff; }
			.post-navigation .nav-previous a:before { background-color: rgba(0, 0, 0, 0.4); }
		
</style>
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../../wp-content/plugins/swfobj/swfobjectdc8c.js?ver=2.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-hide-post/public/js/wp-hide-post-public6471.js?ver=2.0.10'></script>
<link rel='https://api.w.org/' href='../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel='prev' title='Making DNArtwork #8: Generating realistic painted shapes on-demand' href='../dnartwork/dnartwork-generating-realistic-painted-shapes/index.html' />
<meta name="generator" content="WordPress 4.9.11" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../index3b75.html?p=1092' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed99f8.json?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fbuilding-reliable-user-interfaces%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed5569?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fbuilding-reliable-user-interfaces%2F&amp;format=xml" />

		<script type="text/javascript"> document.createElement("video");document.createElement("audio");document.createElement("track"); </script>
				<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- BEGIN GADWP v5.1.2.5 Universal Analytics - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-19810778-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- END GADWP Universal Analytics -->

<!-- START - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
 <!-- Facebook Open Graph -->
  <meta property="og:locale" content="en_GB"/>
  <meta property="og:site_name" content="Bernie Sumption&#039;s Blog"/>
  <meta property="og:title" content="Strategies for building reliable user interfaces"/>
  <meta property="og:url" content="https://blog.berniesumption.com/software/building-reliable-user-interfaces/"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="This article is about how to make UI code reliable. By reliable I mean free from bugs. This implies that the software must also be maintainable, which is to say that you can easily add new features without also adding new bugs. By UI code I mean code that accepts input from users and displays result"/>
  <meta property="og:image" content="/wp-content/uploads/2017/09/aqueduct.jpg"/>
  <meta property="article:published_time" content="2017-09-27T14:09:26+00:00"/>
  <meta property="article:modified_time" content="2019-10-17T08:06:33+00:00" />
  <meta property="og:updated_time" content="2019-10-17T08:06:33+00:00" />
  <meta property="article:section" content="Software"/>
 <!-- Google+ / Schema.org -->
  <meta itemprop="name" content="Strategies for building reliable user interfaces"/>
  <meta itemprop="description" content="This article is about how to make UI code reliable. By reliable I mean free from bugs. This implies that the software must also be maintainable, which is to say that you can easily add new features without also adding new bugs. By UI code I mean code that accepts input from users and displays result"/>
  <meta itemprop="image" content="/wp-content/uploads/2017/09/aqueduct.jpg"/>
 <!-- Twitter Cards -->
  <meta name="twitter:title" content="Strategies for building reliable user interfaces"/>
  <meta name="twitter:url" content="https://blog.berniesumption.com/software/building-reliable-user-interfaces/"/>
  <meta name="twitter:card" content="summary_large_image"/>
 <!-- SEO -->
  <meta name="description" content="This article is about how to make UI code reliable. By reliable I mean free from bugs. This implies that the software must also be maintainable, which is to say that you can easily add new features without also adding new bugs. By UI code I mean code that accepts input from users and displays result"/>
 <!-- Misc. tags -->
<!-- END - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
	
</head>

<body class="post-template-default single single-post postid-1092 single-format-standard">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="../../index.html" rel="home">Bernie Sumption&#039;s Blog</a></p>
											<p class="site-description">Various writings on software development and photography</p>
									<button class="secondary-toggle">Menu and widgets</button>
			</div><!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

		
		
					<div id="widget-area" class="widget-area" role="complementary">
				<aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
	<li class="cat-item cat-item-7"><a href="../../category/photography/index.html" >Photography</a> (12)
</li>
	<li class="cat-item cat-item-1"><a href="../../category/software/index.html" >Software</a> (29)
<ul class='children'>
	<li class="cat-item cat-item-14"><a href="../../category/software/dnartwork/index.html" >DNArtwork</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/urandom/index.html" >urandom</a> (1)
</li>
		</ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widget-title">Recent Posts</h2>		<ul>
											<li>
					<a href="index.html">Strategies for building reliable user interfaces</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-generating-realistic-painted-shapes/index.html">Making DNArtwork #8: Generating realistic painted shapes on-demand</a>
									</li>
											<li>
					<a href="../dnartwork/index.html">Project: DNArtwork</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-how-it-works/index.html">Making DNArtwork #7: how does it work?</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-first-art-print/index.html">Making DNArtwork #6: the first art print, hot off the press</a>
									</li>
					</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul>
			<li><a href='../../2017/09/index.html'>September 2017</a></li>
	<li><a href='../../2016/12/index.html'>December 2016</a></li>
	<li><a href='../../2016/09/index.html'>September 2016</a></li>
	<li><a href='../../2016/07/index.html'>July 2016</a></li>
	<li><a href='../../2016/06/index.html'>June 2016</a></li>
	<li><a href='../../2015/11/index.html'>November 2015</a></li>
	<li><a href='../../2015/10/index.html'>October 2015</a></li>
	<li><a href='../../2015/04/index.html'>April 2015</a></li>
	<li><a href='../../2015/03/index.html'>March 2015</a></li>
	<li><a href='../../2015/02/index.html'>February 2015</a></li>
	<li><a href='../../2015/01/index.html'>January 2015</a></li>
	<li><a href='../../2011/10/index.html'>October 2011</a></li>
	<li><a href='../../2011/05/index.html'>May 2011</a></li>
	<li><a href='../../2011/04/index.html'>April 2011</a></li>
	<li><a href='../../2010/11/index.html'>November 2010</a></li>
	<li><a href='../../2010/10/index.html'>October 2010</a></li>
	<li><a href='../../2010/09/index.html'>September 2010</a></li>
	<li><a href='../../2008/04/index.html'>April 2008</a></li>
	<li><a href='../../2007/11/index.html'>November 2007</a></li>
	<li><a href='../../2007/03/index.html'>March 2007</a></li>
		</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24406">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">Nick Battle</span> on <a href="../daphnes-tweeting-catflap/index.html#comment-24404">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../on-abandoning-gulp/index.html#comment-23795">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link">NotAScriptKiddy</span> on <a href="../on-abandoning-gulp/index.html#comment-23794">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://www.flickr.com/photos/judeapollo' rel='external nofollow' class='url'>Rory Melough</a></span> on <a href="../../photography/depth-of-field-for-geeks/index.html#comment-21881">Bernie&#8217;s Better Guide to Depth of Field for Geeks Who Want to be Digital Artists</a></li></ul></aside>			</div><!-- .widget-area -->
		
	</div><!-- .secondary -->

	</div><!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-1092" class="post-1092 post type-post status-publish format-standard has-post-thumbnail hentry category-software">
	
	<div class="post-thumbnail">
		<img width="825" height="510" src="../../wp-content/uploads/2017/09/aqueduct.jpg" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" srcset="/wp-content/uploads/2017/09/aqueduct.jpg 825w, /wp-content/uploads/2017/09/aqueduct-300x185.jpg 300w, /wp-content/uploads/2017/09/aqueduct-768x475.jpg 768w" sizes="(max-width: 825px) 100vw, 825px" />	</div><!-- .post-thumbnail -->

	
	<header class="entry-header">
		<h1 class="entry-title">Strategies for building reliable user interfaces</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		<h3>Or, &#8220;unit testing of UI code is overrated&#8221;</h3>
<p>This article is about how to make UI code reliable. By <em>reliable</em> I mean free from bugs. This implies that the software must also be maintainable, which is to say that you can easily add new features without also adding new bugs. By <em>UI code</em> I mean code that accepts input from users and displays results. In a modern JavaScript-powered web application, a lot of business logic is moved into the browser. For example, an online chess game may have a virtual opponent that can play against you, choosing the best move to make on each turn. Silly as it may sound to refer to chess as business, the code for this virtual opponent is &#8220;business logic&#8221; rather than UI, and you should probably unit test the shit out of it. UI code covers things like providing feedback as a player drags their chess piece across the board.</p>
<p>There&#8217;s something of a testing religion in software development. Mostly this is a Good Thing &#8211; unit tests are probably the most important tool for building reliable software. In this article I argue that in the context of UI development, there are better techniques for achieving reliability.</p>
<p><span id="more-1092"></span></p>
<h1>Part 1: why unit tests don&#8217;t work on UI code</h1>
<p>This is an article about building reliable UIs, but I&#8217;m going to spend the first half of the article on my claim that unit tests are not a good tool for this purpose. This says something about the position of unit testing in software development &#8211; to many people, unit testing is synonymous with reliability. In fact my motivation for writing this article is that I&#8217;ve worked on a couple of projects where the business considered reliability of the product to be even more important than usual, and this was translated directly into a requirement to unit test more than usual, without much apparent consideration of the alternatives. If you&#8217;re more interested in positive advice then you may want to <a href="#part2">skip to part 2</a>.</p>
<h3>The warm fuzzy feeling of comprehensive tests</h3>
<p>First off, let&#8217;s acknowledge that there is a good reason for unit testing being popular: in some contexts, such tests are necessary and sufficient for building a bug free program. Necessary because they are the most effective tool for getting rid of bugs; sufficient because tests alone are pretty much all you need.</p>
<p>Some programs, especially those that run server-side in a web application, can be specified entirely in terms of input and output. A specification for a REST API server might consist of sentences like this: <em>When a POST request is made to /api/smurfs with a valid JSON-encoded Smurf in the request body, the Smurf should be persisted to the data store and a 200 OK response returned with the new Smurf&#8217;s database ID as the response body</em>. This translates *very* well into a unit test:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">function</span> api_should_create_a_new_smurf<span style="color: #009900;">&#40;</span>api<span style="color: #339933;">,</span> backend<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  let smurf <span style="color: #339933;">=</span> <span style="color: #009900;">&#123;</span>
    name<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;Papa Smurf&quot;</span><span style="color: #339933;">,</span>
    age<span style="color: #339933;">:</span> <span style="color: #CC0000;">546</span><span style="color: #339933;">,</span>
    biography<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;https://en.wikipedia.org/wiki/Papa_Smurf&quot;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span>
  let response <span style="color: #339933;">=</span> api.<span style="color: #660066;">smurfs</span>.<span style="color: #660066;">handlePost</span><span style="color: #009900;">&#40;</span>papaSmurf<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>response.<span style="color: #660066;">status</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">200</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>response.<span style="color: #660066;">body</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span>.<span style="color: #660066;">a</span>.<span style="color: #660066;">number</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>backend.<span style="color: #660066;">getSmurf</span><span style="color: #009900;">&#40;</span>response.<span style="color: #660066;">body</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">equal</span><span style="color: #009900;">&#40;</span>smurf<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">function api_should_create_a_new_smurf(api, backend) {
  let smurf = {
    name: &quot;Papa Smurf&quot;,
    age: 546,
    biography: &quot;https://en.wikipedia.org/wiki/Papa_Smurf&quot;
  };
  let response = api.smurfs.handlePost(papaSmurf);
  expect(response.status).to.be(200);
  expect(response.body).to.be.a.number;
  expect(backend.getSmurf(response.body).to.equal(smurf);
}</p></div>

<p>Further test cases may stipulate what is expected when an invalid Smurf is provided, or when the data store is unavailable. When you have a test for every important aspect of the system, you get <em>the warm fuzzy feeling of comprehensive tests</em>. This is the confidence that you can work freely on any part of the software, knowing that if you accidentally break something then the tests will alert you.</p>
<p>This is important stuff &#8211; it&#8217;s the kind of thing that makes the difference between success and failure for the project, or between happiness and irritation for your developers.</p>
<h3>Why UIs can&#8217;t be comprehensively tested</h3>
<p>Servers are interfaces designed to be used by machines, and so it makes sense that machines are good at testing them. The Smurf API above can be specified in terms of data in and data out. If the input reliably produces the expected output, the server is working, end of story. UIs on the other hand are used by humans, which makes them literally impossible for a machine to test properly. The input to a UI is human intention and the output is human understanding. The <em>only</em> way to test this, at least with current technology, is to have a human do it.</p>
<p>Let me illustrate this with an example. Say we&#8217;ve got this UI:</p>
<p><img class="alignnone size-full wp-image-1101" src="../../wp-content/uploads/2017/09/smurf-app-contracted.png" alt="" width="1320" height="433" srcset="/wp-content/uploads/2017/09/smurf-app-contracted.png 1320w, /wp-content/uploads/2017/09/smurf-app-contracted-300x98.png 300w, /wp-content/uploads/2017/09/smurf-app-contracted-768x252.png 768w, /wp-content/uploads/2017/09/smurf-app-contracted-1024x336.png 1024w" sizes="(max-width: 1320px) 100vw, 1320px" /></p>
<p>Clicking the + icon expands the biography and changes the plus sign to a minus:</p>
<p><img class="alignnone size-full wp-image-1100" src="../../wp-content/uploads/2017/09/smurf-app-expanded.png" alt="" width="1320" height="607" /></p>
<p>The test for whether this feature is working is that when a human attempts to click the biography button, the human can read the biography. The closest that a unit test can get to this is something like this:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">function</span> smurf_biography_should_expand<span style="color: #009900;">&#40;</span>browser<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
  <span style="color: #006600; font-style: italic;">// assume that browser is a selenium object that</span>
  <span style="color: #006600; font-style: italic;">// remote-controls a real web browser</span>
  let page <span style="color: #339933;">=</span> browser.<span style="color: #660066;">navigateTo</span><span style="color: #009900;">&#40;</span>SMURF_VIEW_PAGE<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  let bio <span style="color: #339933;">=</span> page.<span style="color: #660066;">findElement</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#biography&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  let bioButton <span style="color: #339933;">=</span> page.<span style="color: #660066;">findElement</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#biography-toggle-btn&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>bioButton<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">containText</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;Show biography&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>bio.<span style="color: #660066;">style</span>.<span style="color: #660066;">visibility</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;hidden&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  bioButton.<span style="color: #660066;">click</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>bioButton<span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">containText</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;Hide biography&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  expect<span style="color: #009900;">&#40;</span>bio.<span style="color: #660066;">style</span>.<span style="color: #660066;">visibility</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">to</span>.<span style="color: #660066;">be</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;visible&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">function smurf_biography_should_expand(browser) {
  // assume that browser is a selenium object that
  // remote-controls a real web browser
  let page = browser.navigateTo(SMURF_VIEW_PAGE);
  let bio = page.findElement(&quot;#biography&quot;);
  let bioButton = page.findElement(&quot;#biography-toggle-btn&quot;);
  expect(bioButton).to.containText(&quot;Show biography&quot;);
  expect(bio.style.visibility).to.be(&quot;hidden&quot;);
  bioButton.click();
  expect(bioButton).to.containText(&quot;Hide biography&quot;);
  expect(bio.style.visibility).to.be(&quot;visible&quot;);
}</p></div>

<p>This test is not very useful for two reasons.</p>
<p><strong>1. If a UI test passes, it doesn&#8217;t mean that the feature works.</strong> In principle this is true of all tests &#8211; even in well tested server-side code there could always be edge cases where a feature sometimes fails even though all of its tests pass. But UIs are special in that the tests can pass and the feature still be totally, 100% broken all of the time.</p>
<p>This can happen at either the input or output end, when something goes wrong in the gap between what humans and machines are capable of testing. At the input end, the line <code>bioButton.click();</code> will tend to work even if a real human could not click the button. For example the Smurf photo may be wrapped in a full width container with a transparent background that extends over the button, so that when you try to click the button with a mouse you click the photo container instead. The browser automation tool however is just looking up elements by ID and issuing virtual clicks on them, so isn&#8217;t tripped up by this. At the output end, the test verifies that the CSS visibility property has the correct value, not that the eye can see all the right pixels on the screen. Perhaps the biography element has a fixed height so even though the content is shown, it is cropped off and you can only read the first couple of lines.</p>
<p>The end result is that no matter how many unit tests you have, you will <em>never</em> achieve the warm fuzzy feeling of comprehensive tests.</p>
<p><strong>2. The stuff in a UI that can be tested, usually isn&#8217;t worth testing.</strong> Behind a requirement like &#8220;clicking the &#8216;Show biography&#8217; button expands the biography text&#8221; there are tens of tiny requirements, some visible in the design mockup, others implicit: the text should be entirely visible; the icon and button label should be different in the expanded state; if the text is too long it should probably scroll rather than extending off the bottom of the page; the padding around the text should be consistent with the rest of the design; the animation used to expand the text should be consistent with the animations elsewhere; etc etc. In general these sub-features are trivial to implement (anywhere from a single HTML attribute to a few of lines of code), easy to test manually, and isolated (adding or changing one feature is unlikely to break others).</p>
<p>Certain sub-features such as the changing of the button label are easy to test automatically. Others such as the smoothness of the animation are difficult or impossible to test.</p>
<p>Some people advocate testing what can be tested, on the grounds that some tests are better than none. I take the view that this gives a false sense of security, and that it&#8217;s better to be consistent: test none of these sub-features, and focus on other techniques for making reliable UIs.</p>
<h1><a name="part2"></a>Part 2: How to build reliable UIs</h1>
<p>Fear not! The good news is that it is possible to write reliable UI programs. Automated testing has a role to play, but it isn&#8217;t nearly as important as in server-side development.</p>
<p>These are the techniques that I&#8217;ve found useful for building more reliable UIs, in no particular order. The list may grow over time and is biased towards web applications because that&#8217;s what I&#8217;ve been working on recently.</p>
<h3>Have a reliability strategy</h3>
<p>Explicitly recognise reliability as a non-functional requirement of your software, like performance. Decide what techniques you&#8217;re going to use to encourage reliability, then ensure that the whole team is up to speed with the decision.</p>
<p>The list of techniques in the remainder of this article is a good place to start. For each technique, analyse the cost and benefit for your specific project, then decide whether and how to adopt it.</p>
<h3>Good old fashioned software craftsmanship</h3>
<p>Well written software is less likely to contain hidden bugs, and easier to change later without introducing new bugs. This is, after all, how software was created back in the 20th century before Kent Beck made unit testing popular. Whole books have been written on this topic so I can&#8217;t even scratch the surface here, but all of the classic rules of thumb for how to write good software are even more important in UI code: write short methods that do one thing well; use a consistent coding style; use carefully chosen, descriptive method and variable names; avoid code duplication, prefer simple self-explanatory code to comments, but use comments when this isn&#8217;t possible; split features into independent modules with a clearly defined interface between then; avoid shared mutable state; etc etc. This kind of stuff may be best learned over a career of learning from mistakes, but a Google for &#8220;software engineering best practices&#8221; brings up plenty of lists.</p>
<p>When a sufficiently experienced developer is making a product on their own, they can simply decide to employ good software craftsmanship. In a team, good craftsmanship does not simply happen as a result of hiring good developers &#8211; it requires the right leadership and culture. Again, many books have been written on this topic, but some of the important aspects are: designing and communicating coding standards; reading each others code (preferably in a more peer-to-peer manner than the term &#8220;code review&#8221; implies); sharing expertise; collaborative design; and pair programming.</p>
<h3>Automated unit tests</h3>
<p>Having spent all that time bashing unit tests, I&#8217;ll back-pedal a bit.</p>
<p>Sometimes you will find that it is simply easier to develop a bit of code using test-driven development than with manual testing. In this case, it&#8217;s a no brainer: writing unit tests saves you time, and gets you the benefit of unit testing for free.</p>
<p>Other times you may feel that a bit of code you have to write is particularly fiddly or error prone. Your first thought here should be to change your coding patterns so that you don&#8217;t have to write fiddly or error prone code. But sometimes you&#8217;re using a framework that has great benefits, but requires a bit of fiddly coding (<a href="http://redux.js.org/docs/recipes/reducers/ImmutableUpdatePatterns.html">Redux reducers I&#8217;m looking at you</a>) so you appreciate the warm fuzzy feeling of comprehensively testing that little bit of the code base.</p>
<h3>Component development harnesses</h3>
<p>One of the main benefits of unit tests is that they force your code to be modular by making dependencies clear. Each unit test is an isolated environment which creates a new instance of the class and provides it with any dependencies that it needs. If a class has many dependencies then it will be hard to write tests for it, and this encourages the developer to organise the system to minimise dependencies between classes, making the code base more maintainable.</p>
<p>The equivalent for visual components is a development harness. Say you&#8217;re developing a drop-down menu component. The development harness for this will be a screen populated with multiple instances of the menu component with different settings, styles and data. As you develop the component and it grows in complexity, you add more instances to the development harness just as you would add tests to the test suite of a non-visual component. When you&#8217;re doing any major work on the component, you do so in the development harness rather than in the application. This makes you more productive because it&#8217;s faster to make code changes and see their effect. It also enforces modularity &#8211; because your component must be capable of running in both the application and the development harness, it must be a standalone component.</p>
<h3>Strongly typed JavaScript</h3>
<p>JavaScript is a dynamic language, so certain errors aren&#8217;t discovered until the program runs. A bit of code that looks right &#8211; <code>alert("Hello " + user.name)</code> &#8211; may be broken because the <code>user</code> object has no <code>name</code> field, only <code>firstname</code> and <code>lastname</code>. This error could appear in previously working code if user object is refactored but not all of the code using said object is updated. One argument for extensive unit testing is that tests will find these errors, but static type checking is a better way of achieving the same goal.</p>
<p><a href="https://www.typescriptlang.org/">TypeScript</a> and <a href="https://flow.org/">Flow</a> are both excellent static type checkers for JavaScript. Personally I use TypeScript. They eliminate a whole class of errors, and make editing much more productive and enjoyable by underlining errors and autocompleting names as you type.</p>
<h3>Use architecture that encourages modularity</h3>
<p>There are several different techniques relevant here that generally come under <a href="https://en.wikipedia.org/wiki/Inversion_of_control">Inversion of Control</a>, also known as the Hollywood Principle: &#8220;don&#8217;t call us, we&#8217;ll call you&#8221;. Components should not reach outside their bounds and interact with the rest of the system. Instead they should have dependencies provided through dependency injection and signal actions by dispatching events.</p>
<p>For example, when designing a UI it may be the case that when the user clicks &#8220;save&#8221; then the model saves itself to the server. Neither model nor button should know about each other. Instead the button should dispatch a &#8220;request save&#8221; event onto a central event bus which is picked up by the model and triggers it to save. This gives you flexibility to add new features &#8211; such as auto-save every few minutes or a loading spinner that notifies the user when the document is saving &#8211; without having to change the existing components.</p>
<h3>Split code into declarations and engines</h3>
<p>When you can&#8217;t comprehensively test part of a program, it&#8217;s particularly important that the code be simple, readable, and it&#8217;s function self-evident. A really powerful tool for achieving this is to split the code into declarations and engines.</p>
<p>The declaration is a data structure that specifies exactly what you&#8217;re trying to achieve, with <em>no implementation details</em>. The engine is code that interprets this data structure and makes it so.</p>
<p>A good example of this is the Django forms system. A form is defined in one place as a class:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="html" style="font-family:monospace;">class NameForm(forms.Form):
  name = forms.CharField(label='Your name', max_length=100);
  bmu = forms.BooleanField(label='Beam me up?', required=False);</pre></td></tr></table><p class="theCode" style="display:none;">class NameForm(forms.Form):
  name = forms.CharField(label='Your name', max_length=100);
  bmu = forms.BooleanField(label='Beam me up?', required=False);</p></div>

<p>This data structure is used by engine code in several places: on the server to generate the form HTML that is sent to the browser; in the browser by JavaScript to provide immediate validation; and back on the server to securely validate submitted responses.</p>
<p>The Declaration/engine pattern works best when the engine is provided by a well designed and documented framework like Django, in which case you don&#8217;t have to write any of the engine code. But if there&#8217;s no framework available for your use case, it&#8217;s easy enough to write your own. Be aware however that there is a cost: new developers need to learn the declaration format before they can use it, so it&#8217;s only worth doing if you&#8217;re going to make significant use of it.</p>
<h3>Use best-of-breed frameworks that smooth over browser inconsistencies</h3>
<p>Frameworks like React, Angular, Bootstrap and jQuery are indispensable for building modern web apps. They&#8217;re most often thought of as tools to increase productivity or encourage modular architecture, but much of their value lies in the way that they present a consistent API over browser features.</p>
<p>If you add a <code>change</code> event handler to a <code>&lt;select&gt;</code> (dropdown) element using JavaScript, the results will be inconsistent. Some browsers will dispatch the change event when a new item is selected, others only when the user defocusses the select control. In some browsers the change event will bubble, in others it will not. And there are probably more inconsistencies that I don&#8217;t know about. The popular frameworks mentioned above are full of special cases for specific browsers, and they&#8217;ve been tested and refined by thousands of contributions to make sure that some obscure DOM bug in the latest WiFi-enabled fridge from Samsung isn&#8217;t going to cause a bug in your application.</p>
<h3>Automated smoke tests</h3>
<p>Smoke tests are high-level tests on the full running software that check that most of the important features seem to be working. For a browser-based UI application they&#8217;re typically written using a browser remote-control tool like Selenium. The difference between smoke tests and unit, integration or acceptance tests is that a smoke test doesn&#8217;t aim to prove that the system is working exactly as specified, jut that it is working at all.</p>
<p>The great thing about smoke tests is that a little goes a really long way. You describe a few simple paths through your application, for example: log in, add a new Smurf, find the new Smurf on the search page, view the new Smurf&#8217;s biography, remove the smurf, log out. This test would only take a couple of hours to write if you&#8217;re already familiar with Selenium, but if it passes it tells you that all major parts of the application are working &#8211; the JavaScript doesn&#8217;t have any fatal errors, the application server has started up, the database connection is working, etc etc.</p>
<p>A smoke test is a useful thing to run straight after a build to check that the build works. But it&#8217;s also something that you can point at staging or production systems. You could even run it on a schedule every hour, as a more advanced version of a &#8220;ping&#8221; to check server uptime.</p>
<h3>Client-side error collection</h3>
<p>Client-side error collection involves putting code in your app to detect errors that happen on the user&#8217;s computer and alert you to them. You can do it yourself by listening to the window.onerror event, or subscribe to a service like <a href="https://raygun.com/">Raygun</a>, <a href="https://sentry.io/">Sentry</a> or <a href="https://errorception.com/">errorception</a>.</p>
<p>These work so well because they change the economics of bugs that get past QA. Say there&#8217;s a bug that only happens on Firefox Mobile, and that isn&#8217;t one of the browsers you test on. Without client-side error collection, Firefox Mobile users just know that your site doesn&#8217;t work, and either go elsewhere or get a little annoyed and switch to another browser. With client-side error collection, you get notified of the bug and can fix it after only having irritated a few users.</p>
<p>These services only catch JavaScript errors in web applications, not other kinds of errors like images that fail to load. But JavaScript errors are often the most damaging as they will entirely break a feature rather than just make it look a bit off.</p>
<h3>Manual testing</h3>
<p>Some degree of manual testing is usually a good idea for most software projects.</p>
<p>Traditionally, &#8220;manual testing&#8221; means that either you, or another team member, or a 3rd party company, goes through every possible permutation of every feature trying to find bugs. Because the person doing the testing doesn&#8217;t have specialist knowledge required to recognise intuitively if a feature is broken, they need a document telling them how to test. This is called a Testing Procedure Specification, and was <a href="https://www.youtube.com/watch?v=Fy3rjQGc6lA">immortalised in the film Office Space</a> as the emblem of tedious drudge-work in a software company.</p>
<p>A much more pleasant version of manual testing is Dogfooding: the practice of using pre-release versions of your own software internally. Obviously this only works if your company makes a product that it has need of itself. You can&#8217;t dogfood nuclear power plant control software. But if you&#8217;re making a project management app, most of your staff can manually test your software just by going about their day-to-day work. This also has the benefit of making sure that your staff are aware of the latest developments in your software.</p>
<h3>User testing</h3>
<p>User testing is normally thought of as a tool for polishing UX design, not for finding bugs. But as far as users are concerned there is no distinction line between a minor technical bug and a UX issue &#8211; both get in the way of the task they&#8217;re trying to perform. And because user testing is best done on early prototype software, the process of user testing sometimes uncovers new technical bugs.</p>
<p>The most effective kind of user testing involves inviting test subjects to go through a list of tasks in the software, talking out loud about their thought process as they go.</p>
<h3>User feedback</h3>
<p>Finally, when all of the above techniques fail to stop a bug or UX issue from getting into production software, make sure that users have an easy way to report bugs and give suggestions. At a minimum, give an email address that reports can be sent to. Much better is to use a feedback tool like <a href="https://usersnap.com/">Usersnap</a> which can take a screenshot of the page and automatically record information like the browser and operating system in use.</p>
<h1>The end&#8230;</h1>
<p>Have I missed anything out? What are your favourite techniques for making reliable UIs? Feel free to leave a comment with your own preferred techniques for making reliable UIs, or email me on bernie@berniecode.com.</p>
	</div><!-- .entry-content -->

	
	<footer class="entry-footer">
		<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2017-09-27T14:09:26+00:00">27th September 2017</time><time class="updated" datetime="2019-10-17T08:06:33+00:00">17th October 2019</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="../../author/bernie/index.html">bernie</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/software/index.html" rel="category tag">Software</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-## -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../dnartwork/dnartwork-generating-realistic-painted-shapes/index.html" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Making DNArtwork #8: Generating realistic painted shapes on-demand</span></a></div></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- .site-content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- .site-footer -->

</div><!-- .site -->

<script type='text/javascript'>
var colomatduration = 'fast';
var colomatslideEffect = 'slideFade';
</script><script type='text/javascript' src='../../wp-content/plugins/jquery-collapse-o-matic/js/collapse7514.js?ver=1.6.6'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-syntax/js/wp-syntax4963.js?ver=1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/skip-link-focus-fixd01e.js?ver=20141010'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/functions8337.js?ver=20150330'></script>

</body>

<!-- Mirrored from blog.berniesumption.com/software/building-reliable-user-interfaces/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:32:19 GMT -->
</html>

<!-- Dynamic page generated in 0.646 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-10-17 12:31:21 -->

<!-- super cache -->