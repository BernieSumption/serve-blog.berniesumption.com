<!DOCTYPE html>
<html lang="en-GB" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#" class="no-js">

<!-- Mirrored from blog.berniesumption.com/software/daphnes-tweeting-catflap/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:33:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="/wp-content/themes/twentyfifteen/js/html5.js"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Daphne&#8217;s tweeting catflap &#8211; Bernie Sumption&#039;s Blog</title>
<link rel='dns-prefetch' href='http://vjs.zencdn.net/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Feed" href="../../feed/" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Comments Feed" href="../../comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Bernie Sumption&#039;s Blog &raquo; Daphne&#8217;s tweeting catflap Comments Feed" href="feed/" />
<link rel='stylesheet' id='collapseomatic-css-css'  href='../../wp-content/plugins/jquery-collapse-o-matic/light_stylef24c.css?ver=1.6' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-plugin-css'  href='../../wp-content/plugins/videojs-html5-video-player-for-wordpress/plugin-styles433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='videojs-css'  href='http://vjs.zencdn.net/4.5/video-js.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='../../wp-content/plugins/wp-syntax/css/wp-syntax4963.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='chld_thm_cfg_parent-css'  href='../../wp-content/themes/twentyfifteen/style433d.css?ver=4.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/themes/twentyfifteen/genericons/genericonscf1b.css?ver=3.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-style-css'  href='../../wp-content/themes/bernie-2015-blog-theme/style433d.css?ver=4.9.11' type='text/css' media='all' />
<style id='twentyfifteen-style-inline-css' type='text/css'>

			.post-navigation .nav-previous { background-image: url(../../wp-content/uploads/2015/01/BernieBlogHeaderImage-825x510.jpg); }
			.post-navigation .nav-previous .post-title, .post-navigation .nav-previous a:hover .post-title, .post-navigation .nav-previous .meta-nav { color: #fff; }
			.post-navigation .nav-previous a:before { background-color: rgba(0, 0, 0, 0.4); }
		
</style>
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../../wp-content/plugins/swfobj/swfobjectdc8c.js?ver=2.2'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-hide-post/public/js/wp-hide-post-public6471.js?ver=2.0.10'></script>
<link rel='https://api.w.org/' href='../../wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel='prev' title='Hello World' href='../../urandom/hello-world/' />
<link rel='next' title='How to make Karma / Jasmine tests fail on console errors' href='../make-karma-jasmine-tests-fail-on-console-errors/' />
<meta name="generator" content="WordPress 4.9.11" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../index79e7.html?p=756' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed8fbc.json?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fdaphnes-tweeting-catflap%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed6360?url=https%3A%2F%2Fblog.berniesumption.com%2Fsoftware%2Fdaphnes-tweeting-catflap%2F&amp;format=xml" />

		<script type="text/javascript"> document.createElement("video");document.createElement("audio");document.createElement("track"); </script>
				<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- BEGIN GADWP v5.1.2.5 Universal Analytics - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-19810778-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- END GADWP Universal Analytics -->

<!-- START - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
 <!-- Facebook Open Graph -->
  <meta property="og:locale" content="en_GB"/>
  <meta property="og:site_name" content="Bernie Sumption&#039;s Blog"/>
  <meta property="og:title" content="Daphne&#039;s tweeting catflap"/>
  <meta property="og:url" content="https://blog.berniesumption.com/software/daphnes-tweeting-catflap/"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Daphne the Wondercat: monarch, fluffball, evil genius.

Daphne often takes to social media to rant about the inadequate service provided by her staff (tech journalist Kate Bevan). This activity is cathartic, and highly recommended for any household pet. Unfortunately, Daphne’s catflap was until re"/>
  <meta property="og:image" content="/wp-content/uploads/2015/02/daphne-crop-header.jpg"/>
  <meta property="article:published_time" content="2015-02-26T00:32:35+00:00"/>
  <meta property="article:modified_time" content="2019-10-17T08:06:36+00:00" />
  <meta property="og:updated_time" content="2019-10-17T08:06:36+00:00" />
  <meta property="article:section" content="Software"/>
 <!-- Google+ / Schema.org -->
  <meta itemprop="name" content="Daphne&#039;s tweeting catflap"/>
  <meta itemprop="description" content="Daphne the Wondercat: monarch, fluffball, evil genius.

Daphne often takes to social media to rant about the inadequate service provided by her staff (tech journalist Kate Bevan). This activity is cathartic, and highly recommended for any household pet. Unfortunately, Daphne’s catflap was until re"/>
  <meta itemprop="image" content="/wp-content/uploads/2015/02/daphne-crop-header.jpg"/>
 <!-- Twitter Cards -->
  <meta name="twitter:title" content="Daphne&#039;s tweeting catflap"/>
  <meta name="twitter:url" content="https://blog.berniesumption.com/software/daphnes-tweeting-catflap/"/>
  <meta name="twitter:card" content="summary_large_image"/>
 <!-- SEO -->
  <meta name="description" content="Daphne the Wondercat: monarch, fluffball, evil genius.

Daphne often takes to social media to rant about the inadequate service provided by her staff (tech journalist Kate Bevan). This activity is cathartic, and highly recommended for any household pet. Unfortunately, Daphne’s catflap was until re"/>
 <!-- Misc. tags -->
<!-- END - Facebook Open Graph, Google+ and Twitter Card Tags 2.1.3 -->
	
</head>

<body class="post-template-default single single-post postid-756 single-format-standard">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="../../" rel="home">Bernie Sumption&#039;s Blog</a></p>
											<p class="site-description">Various writings on software development and photography</p>
									<button class="secondary-toggle">Menu and widgets</button>
			</div><!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

		
		
					<div id="widget-area" class="widget-area" role="complementary">
				<aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
	<li class="cat-item cat-item-7"><a href="../../category/photography/" >Photography</a> (12)
</li>
	<li class="cat-item cat-item-1"><a href="../../category/software/" >Software</a> (29)
<ul class='children'>
	<li class="cat-item cat-item-14"><a href="../../category/software/dnartwork/" >DNArtwork</a> (8)
</li>
</ul>
</li>
	<li class="cat-item cat-item-8"><a href="../../category/urandom/" >urandom</a> (1)
</li>
		</ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widget-title">Recent Posts</h2>		<ul>
											<li>
					<a href="../building-reliable-user-interfaces/">Strategies for building reliable user interfaces</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-generating-realistic-painted-shapes/">Making DNArtwork #8: Generating realistic painted shapes on-demand</a>
									</li>
											<li>
					<a href="../dnartwork/">Project: DNArtwork</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-how-it-works/">Making DNArtwork #7: how does it work?</a>
									</li>
											<li>
					<a href="../dnartwork/dnartwork-first-art-print/">Making DNArtwork #6: the first art print, hot off the press</a>
									</li>
					</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul>
			<li><a href='../../2017/09/'>September 2017</a></li>
	<li><a href='../../2016/12/'>December 2016</a></li>
	<li><a href='../../2016/09/'>September 2016</a></li>
	<li><a href='../../2016/07/'>July 2016</a></li>
	<li><a href='../../2016/06/'>June 2016</a></li>
	<li><a href='../../2015/11/'>November 2015</a></li>
	<li><a href='../../2015/10/'>October 2015</a></li>
	<li><a href='../../2015/04/'>April 2015</a></li>
	<li><a href='../../2015/03/'>March 2015</a></li>
	<li><a href='../../2015/02/'>February 2015</a></li>
	<li><a href='../../2015/01/'>January 2015</a></li>
	<li><a href='../../2011/10/'>October 2011</a></li>
	<li><a href='../../2011/05/'>May 2011</a></li>
	<li><a href='../../2011/04/'>April 2011</a></li>
	<li><a href='../../2010/11/'>November 2010</a></li>
	<li><a href='../../2010/10/'>October 2010</a></li>
	<li><a href='../../2010/09/'>September 2010</a></li>
	<li><a href='../../2008/04/'>April 2008</a></li>
	<li><a href='../../2007/11/'>November 2007</a></li>
	<li><a href='../../2007/03/'>March 2007</a></li>
		</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="index.html#comment-24406">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">Nick Battle</span> on <a href="index.html#comment-24404">Daphne&#8217;s tweeting catflap</a></li><li class="recentcomments"><span class="comment-author-link">bernie</span> on <a href="../on-abandoning-gulp/index.html#comment-23795">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link">NotAScriptKiddy</span> on <a href="../on-abandoning-gulp/index.html#comment-23794">On abandoning Gulp</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://www.flickr.com/photos/judeapollo' rel='external nofollow' class='url'>Rory Melough</a></span> on <a href="../../photography/depth-of-field-for-geeks/index.html#comment-21881">Bernie&#8217;s Better Guide to Depth of Field for Geeks Who Want to be Digital Artists</a></li></ul></aside>			</div><!-- .widget-area -->
		
	</div><!-- .secondary -->

	</div><!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-756" class="post-756 post type-post status-publish format-standard has-post-thumbnail hentry category-software">
	
	<div class="post-thumbnail">
		<img width="825" height="510" src="../../wp-content/uploads/2015/02/daphne-crop-header-825x510.jpg" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" srcset="/wp-content/uploads/2015/02/daphne-crop-header.jpg 825w, /wp-content/uploads/2015/02/daphne-crop-header-300x185.jpg 300w" sizes="(max-width: 825px) 100vw, 825px" />	</div><!-- .post-thumbnail -->

	
	<header class="entry-header">
		<h1 class="entry-title">Daphne&#8217;s tweeting catflap</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Daphne the Wondercat: monarch, fluffball, evil genius.</p>
<p><img class=" wp-image-761 size-full aligncenter" src="../../wp-content/uploads/2015/02/daphcrown-2_400x400.jpg" alt="daphcrown-2_400x400" width="400" height="400" srcset="/wp-content/uploads/2015/02/daphcrown-2_400x400.jpg 400w, /wp-content/uploads/2015/02/daphcrown-2_400x400-150x150.jpg 150w, /wp-content/uploads/2015/02/daphcrown-2_400x400-300x300.jpg 300w" sizes="(max-width: 400px) 100vw, 400px" />Daphne often takes to <a href="https://www.facebook.com/DaphneWonderCat">social</a> <a href="https://twitter.com/daphnethecat">media</a> to rant about the inadequate service provided by her staff (tech journalist <a href="https://twitter.com/katebevan">Kate Bevan</a>). This activity is cathartic, and highly recommended for any household pet. Unfortunately, Daphne’s catflap was until recently mute, and couldn’t tell the world about its thoughts and feelings.</p>
<p>This was a pity, because Daphne’s catflap actually has a lot to tell the world. You see, the catflap *loves* daphne. Each time daphne passes through, its universe lights up with joy. Every time Daphne’s whisker brushes against it, a tremor of excitement passes through its little plastic body.</p>
<p>In this project, we gave the catflap a voice.</p>
<p><span id="more-756"></span></p>
<p>Each time Daphne walks through, the catflap will take a photo and tweet it, along with a little paean to Daphne’s greatness:</p>
<blockquote class="twitter-tweet" width="550">
<p>Gasp! It’s Daphne, of the nobly held, amazing tail. My week could not be more complete. <a href="http://t.co/xdo4H4p7N7">pic.twitter.com/xdo4H4p7N7</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/570592644759486464">February 25, 2015</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<h2>The technology stack</h2>
<p>OK, so the phrase “technology stack” is a bit grandiose to describe this project. Technology teetering edifice more like it:</p>
<p><img class="aligncenter size-full wp-image-767" src="../../wp-content/uploads/2015/02/stack.jpg" alt="stack" width="800" height="507" srcset="/wp-content/uploads/2015/02/stack.jpg 800w, /wp-content/uploads/2015/02/stack-300x190.jpg 300w" sizes="(max-width: 800px) 100vw, 800px" /></p>
<h3>Raspberry Pi</h3>
<p>The Raspberry Pi is a cheap, credit card sized computer that was originally designed to be used in schools to teach computing, but seems to have been most enthusiastically adopted by middle-aged geeks nostalgic for the days when you had to build your own computers.</p>
<p>The RPi was the perfect base for this project as it runs linux so all my favourite languages and frameworks are available. It’s a bit of a power hog compared to, say, Arduino, but we don’t care about that because we’re running off mains.</p>
<p><img class="aligncenter size-large wp-image-770" src="../../wp-content/uploads/2015/02/Raspberry_Pi_Model_B_Rev._2-1024x683.jpg" alt="Raspberry_Pi_Model_B_Rev._2" width="660" height="440" srcset="/wp-content/uploads/2015/02/Raspberry_Pi_Model_B_Rev._2-1024x683.jpg 1024w, /wp-content/uploads/2015/02/Raspberry_Pi_Model_B_Rev._2-300x200.jpg 300w" sizes="(max-width: 660px) 100vw, 660px" /></p>
<p>One of the things that makes the RPi great for this kind of project is its GPIO (general purpose input output) connections &#8211; that&#8217;s the row of pins along the top of the board. These can be configured either to apply a voltage (output) or detect the voltage that is applied to them (input).</p>
<h3>Magnetic door sensor</h3>
<p>A £3 reed switch from Maplin provides our input. This is wired to the GPIO sensors using a couple of resistors that prevent the Pi from being damaged by drawing too much current:</p>
<p><img class="aligncenter size-full wp-image-772" src="../../wp-content/uploads/2015/02/wiring-diagram.png" alt="wiring-diagram" width="940" height="581" srcset="/wp-content/uploads/2015/02/wiring-diagram.png 940w, /wp-content/uploads/2015/02/wiring-diagram-300x185.png 300w, /wp-content/uploads/2015/02/wiring-diagram-825x510.png 825w" sizes="(max-width: 940px) 100vw, 940px" /></p>
<p>All neatly soldered together, it looks like this:</p>
<p><a href="../../wp-content/uploads/2015/02/soldered.jpg"><img class="aligncenter size-full wp-image-773" src="../../wp-content/uploads/2015/02/soldered.jpg" alt="soldered" width="800" height="300" srcset="/wp-content/uploads/2015/02/soldered.jpg 800w, /wp-content/uploads/2015/02/soldered-300x113.jpg 300w" sizes="(max-width: 800px) 100vw, 800px" /></a></p>
<p>Bea-u-ti-ful!</p>
<p>The reed switch is duct-taped to the catflap so that when Daphne walks through, the voltage on a GPIO pin changes and the software can spring into action.</p>
<h3>Webcam</h3>
<p>Getting hardware to work on Linux is all about carefully choosing your device for good Linux compatibility. Or so I&#8217;m told. We picked a camera solely on the basis of looks:</p>
<p><a href="../../wp-content/uploads/2015/02/top-coolest-best-latest-new-fun-geek-gadgets-mickey-cam.jpg"><img class="aligncenter  wp-image-774" src="../../wp-content/uploads/2015/02/top-coolest-best-latest-new-fun-geek-gadgets-mickey-cam.jpg" alt="top-coolest-best-latest-new-fun-geek-gadgets-mickey-cam" width="444" height="370" srcset="/wp-content/uploads/2015/02/top-coolest-best-latest-new-fun-geek-gadgets-mickey-cam.jpg 540w, /wp-content/uploads/2015/02/top-coolest-best-latest-new-fun-geek-gadgets-mickey-cam-300x250.jpg 300w" sizes="(max-width: 444px) 100vw, 444px" /></a></p>
<p>Little known fact: for every man, woman and child on this planet there are three open source linux video utilities that claim to be able to capture still images from a UVC webcam. And 98% of them don’t work on the RPi, or they only work at certain odd resolutions, or they produce blurry or dark images, or 1 in 50 images is flat green.</p>
<p>Fortunately, since there are so many, it’s not necessary to figure out why each one isn’t working &#8211; you just move on to the next. After trying uvccapture, mplayer, and v4l2grab, eventually fswebcam worked.</p>
<p>This is another real advantage of the RPi over Arduino. A massive amount of software is just a <code>sudo apt-get install fswebcam</code> away.</p>
<h3>Generative grammar</h3>
<p>A generative grammar is a way of creating sentences that meet certain rules. It works by taking a standard sentence structure and replacing nodes in the sentence with one of several options.</p>
<p>Here’s an example:</p>
<pre>I’m a little {noun-phrase}, {adjective} and {adjective}.</pre>
<p>When this grammar is expanded, each of the three {nodes} will be replaced with an appropriate sentence fragment. Of course, the above is incomplete because a computer doesn’t know what a “noun-phrase” is. So you have to tell it:</p>
<pre>I’m a {noun-phrase}, {adjective} and {adjective}.

[noun-phrase]
 {noun}
 {adjective} {noun-phrase}

[noun]
 teapot
 dictator
 grammaphone
 biscuit barrel

[adjective]
 short
 stout
 musical
 fragrent
 curiouser
 megalomaniacal</pre>
<p>Hopefully the above is easy enough to follow. Each [section] contains a list of possible values for the {node} of the same name. Values can themselves contain references to other {nodes}. So expanding each node in the sentence, the above could become:</p>
<blockquote><p>I’m a little teapot, short and stout</p></blockquote>
<p>or</p>
<blockquote><p>I’m a biscuit barrel, curiouser and curiouser</p></blockquote>
<p>Note how the {noun-phrase} rule is recursive &#8211; one of its values includes itself. This means that the adjectives can repeat, so “fragrant musical teapot” is a valid {noun-phrase}.</p>
<p>The generative grammar file for the tweeting catflap is <a href="https://github.com/BernieSumption/tweeting-catflap/blob/master/grammar.txt">here</a> and the python code that expands the grammar is <a href="https://github.com/BernieSumption/tweeting-catflap/blob/master/grammar.py">here</a>.</p>
<h2>Glue, duct tape and sticking plasters</h2>
<p><img class="aligncenter wp-image-775" src="../../wp-content/uploads/2015/02/python-logo-master-v3-TM.png" alt="python-logo-master-v3-TM" width="305" height="103" srcset="/wp-content/uploads/2015/02/python-logo-master-v3-TM.png 601w, /wp-content/uploads/2015/02/python-logo-master-v3-TM-300x101.png 300w" sizes="(max-width: 305px) 100vw, 305px" /></p>
<p>Finally, the glue that holds all the components together is <a href="https://www.python.org/">Python</a>. It&#8217;s Python that monitors the magnetic switch through the GPIO pins, triggers the webcam, expands the generative grammar, collects the results together and posts it all to twitter.</p>
<p>Python&#8217;s clear syntax and simple learning curve make it significantly easier to program in while tipsy &#8211; an important consideration for a weekend project.</p>
<h2>The result</h2>
<p>Alternate pictures show a head&#8230;</p>
<blockquote class="twitter-tweet" width="550">
<p>Most exquisite Daphne, how soft is your magnificent fwuff. I can expire without regrets. <a href="http://t.co/OsXXyC63up">pic.twitter.com/OsXXyC63up</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/529595303713058816">November 4, 2014</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>&#8230; and a big fluffy arse.</p>
<blockquote class="twitter-tweet" width="550">
<p>Oh my! It’s Daphne, how noble is your imperial demeanour. No wall-mounted fixture could be luckier than me. <a href="http://t.co/8VycLROLag">pic.twitter.com/8VycLROLag</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/570582543105462273">February 25, 2015</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>Nighttime venturing</p>
<blockquote class="twitter-tweet" width="550">
<p>Most amazing Daphne, such nobly held, elegant tail. Ohmygoshohmygosh. <a href="http://t.co/rfl1jDevrQ">pic.twitter.com/rfl1jDevrQ</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/529196572740157440">November 3, 2014</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>Glitch!</p>
<blockquote class="twitter-tweet" width="550">
<p>Cherished Daphne, how noble is your imperial demeanour. My day could not be better. <a href="http://t.co/wjtmpTWLC3">pic.twitter.com/wjtmpTWLC3</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/529477255865851904">November 4, 2014</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>Hey that&#8217;s not a cat! Testing before go-live.</p>
<blockquote class="twitter-tweet" width="550">
<p>Daphne, the fluffiest and most elegant feline, so lustrous is your glossy coat. I can die content. <a href="http://t.co/mOyzuisToa">pic.twitter.com/mOyzuisToa</a></p>
<p>&mdash; Daphne&#39;s Catflap (@DaphneFlap) <a href="https://twitter.com/DaphneFlap/status/529628272293052417">November 4, 2014</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
	</div><!-- .entry-content -->

	
	<footer class="entry-footer">
		<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="index.html" rel="bookmark"><time class="entry-date published" datetime="2015-02-26T00:32:35+00:00">26th February 2015</time><time class="updated" datetime="2019-10-17T08:06:36+00:00">17th October 2019</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="../../author/bernie/">bernie</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="../../category/software/" rel="category tag">Software</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-## -->

<div id="comments" class="comments-area">

			<h2 class="comments-title">
			8 thoughts on &ldquo;Daphne&#8217;s tweeting catflap&rdquo;		</h2>

		
		<ol class="comment-list">
					<li id="comment-16741" class="comment even thread-even depth-1 parent">
			<article id="div-comment-16741" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/5a30806cf9295790821e725509170a1f?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/5a30806cf9295790821e725509170a1f?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Slam</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-16741">
							<time datetime="2016-01-26T18:42:27+00:00">
								26th January 2016 at 6:42 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I like this, i am looking to do something similar and got very excited when i saw the make of catflap. I want to capture the chip id of each of my 3 cats so i can see when they have been coming and going.  So far i have not found away to interrogate the circuit on my spare flap.  Alas you have taken a fifferent approach but still a good idea.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-18414" class="comment odd alt depth-2">
			<article id="div-comment-18414" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/35cd730c9ede3a32c5a8674fef46147b?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/35cd730c9ede3a32c5a8674fef46147b?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn"><a href='http://twitter.com/daphneflap' rel='external nofollow' class='url'>Kate</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-18414">
							<time datetime="2016-04-12T21:48:42+00:00">
								12th April 2016 at 9:48 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Belatedly, as I&#8217;ve only just seen this @Slam, if it&#8217;s a Sureflap, speak to them; they&#8217;re very responsive. I know they&#8217;re developing some kind of IoT catflap, and it&#8217;s on my list to ask them if they&#8217;re going to provide an API. When I first started looking at how to put @Daphneflap on Twitter, I did a bit of digging around whether it could be triggered by the chip-reader on the Sureflap and had quite a long correspondence with the Raspberry Pi people about RFID. That was a dead end, and then Bernie came on board and made it all happen, but it&#8217;s definitely worth talking to Sureflap.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-20743" class="comment even thread-odd thread-alt depth-1 parent">
			<article id="div-comment-20743" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/bc2147a137e1e9f82dfa348f1fdf34e9?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/bc2147a137e1e9f82dfa348f1fdf34e9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Sian Armstrong</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20743">
							<time datetime="2016-11-23T11:04:27+00:00">
								23rd November 2016 at 11:04 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I LOVE this. Want to make one (modified a bit!) for my greyhound (hence the required modifications!)<br />
I&#8217;m fully versed in coding (C and various others, but novice Python) and electronics, but a total Raspberry Pi novice. Planning to use such a project to get myself up to speed over the Christmas hols. But time is precious, so would love a few more pointers as to how to get started.<br />
Any essential links you could point me to? :-)</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-20744" class="comment byuser comment-author-bernie bypostauthor odd alt depth-2">
			<article id="div-comment-20744" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20744">
							<time datetime="2016-11-23T12:32:35+00:00">
								23rd November 2016 at 12:32 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Not really, whenever I needed to figure out how to do something I just hit up Google and tried lots of different things until I found something that worked. Lots of the info is in the form of technical discussions on various web forums and email group archives. Feel free to come back with specific questions if you get stuck. I&#8217;m on <a href="mailto:bernie@berniecode.com">bernie@berniecode.com</a>.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-20950" class="comment even thread-even depth-1 parent">
			<article id="div-comment-20950" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/70dd7cbf2fc110166979358e9102927d?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/70dd7cbf2fc110166979358e9102927d?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Mark</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20950">
							<time datetime="2016-12-11T17:06:05+00:00">
								11th December 2016 at 5:06 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Love this!  Currently trying to implement it myself but a) my cats do not like the new catflap I brought and b) my USB webcam (a old ps3eyetoy) appears to have given up on life after years of being demoted to the loft.  </p>
<p>Any pointers for getting this to work with the rpi-cam which I have abundances of??</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-20954" class="comment byuser comment-author-bernie bypostauthor odd alt depth-2">
			<article id="div-comment-20954" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-20954">
							<time datetime="2016-12-12T11:28:39+00:00">
								12th December 2016 at 11:28 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>If you&#8217;re using the <a href="https://github.com/BernieSumption/tweeting-catflap" rel="nofollow">code that I put on GitHub</a>, then it would be easy to swap out another camera. Edit <code>capture-image.sh</code> and replace it with an alternative Linux shell command that captures an image from your camera and saves it to a file called <code>capture.jpg</code>. I assume that the rpi-cam has a suitable command line utility?</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-24404" class="comment even thread-odd thread-alt depth-1 parent">
			<article id="div-comment-24404" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/d2896941695cc8a286914b02709986bf?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/d2896941695cc8a286914b02709986bf?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">Nick Battle</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-24404">
							<time datetime="2018-08-09T19:33:38+00:00">
								9th August 2018 at 7:33 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>There&#8217;s an interesting problem with the generative grammar and punctuation. The topmost clause explicitly adds full stops after each subpart. But some of the subparts can end with ! or ? which results in doubly punctuated endings like!.</p>
<p>It&#8217;s tricky to fix though. I&#8217;m not sure that the generative system described here can flexibly handle closing punctuation? It could be bodged in the Python, but that&#8217;s a bit ugly.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-24406" class="comment byuser comment-author-bernie bypostauthor odd alt depth-2">
			<article id="div-comment-24406" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=56&amp;d=mm&amp;r=g' srcset='https://secure.gravatar.com/avatar/dc4bea5d8218ffd142a685fc9a948804?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />						<b class="fn">bernie</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="index.html#comment-24406">
							<time datetime="2018-08-10T08:19:11+00:00">
								10th August 2018 at 8:19 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Technically it&#8217;s possible to write a generative grammar that always produces correct grammar, but it&#8217;s hard work. I wouldn&#8217;t call stripping double punctuation in python a bodge, I&#8217;d call it a UX improvement :o) It&#8217;s in the same class as how the generator will let you write [node-name] or [Node-name] and the second will capitalise the first letter in the resulting text.</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
			<p class="no-comments">Comments are closed.</p>
	
	
</div><!-- .comments-area -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="../../urandom/hello-world/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Hello World</span></a></div><div class="nav-next"><a href="../make-karma-jasmine-tests-fail-on-console-errors/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">How to make Karma / Jasmine tests fail on console errors</span></a></div></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- .site-content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- .site-footer -->

</div><!-- .site -->

<script type='text/javascript'>
var colomatduration = 'fast';
var colomatslideEffect = 'slideFade';
</script><script type='text/javascript' src='../../wp-content/plugins/jquery-collapse-o-matic/js/collapse7514.js?ver=1.6.6'></script>
<script type='text/javascript' src='../../wp-content/plugins/wp-syntax/js/wp-syntax4963.js?ver=1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/skip-link-focus-fixd01e.js?ver=20141010'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentyfifteen/js/functions8337.js?ver=20150330'></script>

</body>

<!-- Mirrored from blog.berniesumption.com/software/daphnes-tweeting-catflap/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2019 12:33:33 GMT -->
</html>

<!-- Dynamic page generated in 0.723 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-10-17 12:31:40 -->

<!-- super cache -->